<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="A brief look at finding a trading signal based on moving averages of the VIX.">
<title>Investigating A VIX Trading Signal</title>

<link rel='canonical' href='https://www.jaredszajkowski.com/2025/03/01/investigating-a-vix-trading-signal/'>

<link rel="stylesheet" href="/scss/style.min.da28754071fdaf9a58e8a578c9918e494018d97e1164a8200a93b14c08c2cb5a.css"><meta property='og:title' content="Investigating A VIX Trading Signal">
<meta property='og:description' content="A brief look at finding a trading signal based on moving averages of the VIX.">
<meta property='og:url' content='https://www.jaredszajkowski.com/2025/03/01/investigating-a-vix-trading-signal/'>
<meta property='og:site_name' content='Jared Szajkowski'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Python' /><meta property='article:tag' content='Yahoo Finance' /><meta property='article:tag' content='pandas' /><meta property='article:tag' content='VIX' /><meta property='article:published_time' content='2025-03-01T00:00:01&#43;00:00'/><meta property='article:modified_time' content='2025-05-26T00:00:01&#43;00:00'/><meta property='og:image' content='https://www.jaredszajkowski.com/2025/03/01/investigating-a-vix-trading-signal/cover.jpg' />
<meta name="twitter:title" content="Investigating A VIX Trading Signal">
<meta name="twitter:description" content="A brief look at finding a trading signal based on moving averages of the VIX."><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://www.jaredszajkowski.com/2025/03/01/investigating-a-vix-trading-signal/cover.jpg' />
    <link rel="shortcut icon" href="/profile_pic.jpg" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/profile_pic_hu_35859dcdcf246484.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Jared Szajkowski</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='mailto:jared.szajkowski@gmail.com'
                        target="_blank"
                        title="Email"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-mail" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/jaredszajkowski'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://www.linkedin.com/in/jaredszajkowski/'
                        target="_blank"
                        title="LinkedIn"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-linkedin" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z" /><path d="M8 11l0 5" /><path d="M8 8l0 .01" /><path d="M12 16l0 -5" /><path d="M16 16v-3a2 2 0 0 0 -4 0" /></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about-me/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About Me</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#post-updates">Post Updates</a></li>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#vix-data">VIX Data</a></li>
    <li><a href="#python-functions">Python Functions</a>
      <ol>
        <li><a href="#typical-functions">Typical Functions</a></li>
        <li><a href="#project-specific-functions">Project Specific Functions</a></li>
      </ol>
    </li>
    <li><a href="#data-overview-vix">Data Overview (VIX)</a>
      <ol>
        <li><a href="#acquire-cboe-volatility-index-vix-data">Acquire CBOE Volatility Index (VIX) Data</a></li>
        <li><a href="#load-data---vix">Load Data - VIX</a></li>
        <li><a href="#dataframe-info---vix">DataFrame Info - VIX</a></li>
        <li><a href="#statistics---vix">Statistics - VIX</a></li>
        <li><a href="#deciles---vix">Deciles - VIX</a></li>
      </ol>
    </li>
    <li><a href="#plots---vix">Plots - VIX</a>
      <ol>
        <li><a href="#histogram-distribution---vix">Histogram Distribution - VIX</a></li>
        <li><a href="#historical-data---vix">Historical Data - VIX</a></li>
      </ol>
    </li>
    <li><a href="#data-overview-vvix">Data Overview (VVIX)</a>
      <ol>
        <li><a href="#acquire-cboe-vvix-data">Acquire CBOE VVIX Data</a></li>
        <li><a href="#load-data---vvix">Load Data - VVIX</a></li>
        <li><a href="#dataframe-info---vvix">DataFrame Info - VVIX</a></li>
        <li><a href="#statistics---vvix">Statistics - VVIX</a></li>
        <li><a href="#deciles---vvix">Deciles - VVIX</a></li>
      </ol>
    </li>
    <li><a href="#plots---vvix">Plots - VVIX</a>
      <ol>
        <li><a href="#histogram-distribution---vvix">Histogram Distribution - VVIX</a></li>
        <li><a href="#historical-data---vvix">Historical Data - VVIX</a></li>
      </ol>
    </li>
    <li><a href="#investigating-a-signal">Investigating A Signal</a>
      <ol>
        <li><a href="#determining-a-spike-level">Determining A Spike Level</a></li>
        <li><a href="#spike-counts-signals-by-year">Spike Counts (Signals) By Year</a></li>
        <li><a href="#spike-counts-signals-plots-by-year">Spike Counts (Signals) Plots By Year</a>
          <ol>
            <li><a href="#2020">2020</a></li>
            <li><a href="#2021">2021</a></li>
            <li><a href="#2022">2022</a></li>
            <li><a href="#2023">2023</a></li>
            <li><a href="#2024">2024</a></li>
            <li><a href="#2025">2025</a></li>
          </ol>
        </li>
        <li><a href="#spike-counts-signals-plots-by-decade">Spike Counts (Signals) Plots By Decade</a>
          <ol>
            <li><a href="#1990---1994">1990 - 1994</a></li>
            <li><a href="#1995---1999">1995 - 1999</a></li>
            <li><a href="#2000---2004">2000 - 2004</a></li>
            <li><a href="#2005---2009">2005 - 2009</a></li>
            <li><a href="#2010---2014">2010 - 2014</a></li>
            <li><a href="#2015---2019">2015 - 2019</a></li>
            <li><a href="#2020---2024">2020 - 2024</a></li>
            <li><a href="#2025---present">2025 - Present</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#trading-history">Trading History</a>
      <ol>
        <li><a href="#trades-executed">Trades Executed</a>
          <ol>
            <li><a href="#volatility-in-august-2024">Volatility In August 2024</a></li>
            <li><a href="#volatility-in-march-2025">Volatility In March 2025</a></li>
            <li><a href="#volatility-in-april-2025">Volatility In April 2025</a></li>
            <li><a href="#complete-trade-history">Complete Trade History</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#references">References</a></li>
    <li><a href="#code">Code</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/2025/03/01/investigating-a-vix-trading-signal/">
                <img src="/2025/03/01/investigating-a-vix-trading-signal/cover.jpg"
                        
                        width="1920" 
                        height="800" 
                        loading="lazy"
                        alt="Featured image of post Investigating A VIX Trading Signal" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/financial-data/" style="background-color: #A0A0A0; color: ;">
                Financial Data
            </a>
        
            <a href="/categories/trading/" style="background-color: #F45B69; color: ;">
                Trading
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/2025/03/01/investigating-a-vix-trading-signal/">Investigating A VIX Trading Signal</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            A brief look at finding a trading signal based on moving averages of the VIX.
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">March 1, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    36 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="post-updates">Post Updates
</h2><p>Update 4/8/2025: Added plot for signals for each year. VIX data through 4/7/25.</br>
Update 4/9/2025: VIX data through 4/8/25.</br>
Update 4/12/2025: VIX data through 4/10/25.</br>
Update 4/22/2025: VIX data through 4/18/25.</br>
Update 4/23/2025: VIX data through 4/22/25.</br>
Update 4/25/2025: VIX data through 4/23/25. Added section for trade history, including open and closed positions.</br>
Update 4/28/2025: VIX data through 4/25/25.</br>
Update 5/6/2025: Data through 5/5/25. Added section for the VVIX.</br>
Update 5/7/2025: Data through 5/6/25.</br>
Update 5/21/2025: Data through 5/20/25.</br></p>
<h2 id="introduction">Introduction
</h2><p>From the <a class="link" href="https://www.cboe.com/tradable_products/vix/"  target="_blank" rel="noopener"
    >CBOE VIX website</a>:</p>
<p>&ldquo;Cboe Global Markets revolutionized investing with the creation of the Cboe Volatility Index® (VIX® Index), the first benchmark index to measure the market’s expectation of future volatility. The VIX Index is based on options of the S&amp;P 500® Index, considered the leading indicator of the broad U.S. stock market. The VIX Index is recognized as the world’s premier gauge of U.S. equity market volatility.&rdquo;</p>
<p>In this tutorial, we will investigate finding a signal to use as a basis to trade the VIX.</p>
<h2 id="vix-data">VIX Data
</h2><p>I don&rsquo;t have access to data for the VIX through <a class="link" href="https://www.nasdaq.com/nasdaq-data-link"  target="_blank" rel="noopener"
    >Nasdaq Data Link</a> or any other data source, but for our purposes Yahoo Finance is sufficient. Using the <a class="link" href="https://pypi.org/project/yfinance/"  target="_blank" rel="noopener"
    >yfinance</a> python module, we can pull what we need and quicky dump it to excel to retain it for future use.</p>
<h2 id="python-functions">Python Functions
</h2><h3 id="typical-functions">Typical Functions
</h3><p>First, the typical set of functions I use. <code>export_track_md_deps</code> exports various text outputs to markdown files, which are included in the index.md file created when building the site with Hugo.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">export_track_md_deps</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">dep_file</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">md_filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    Export Markdown content to a file and track it as a dependency.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    This function writes the provided content to the specified Markdown file and 
</span></span></span><span class="line"><span class="cl"><span class="s2">    appends the filename to the given dependency file (typically `index_dep.txt`).
</span></span></span><span class="line"><span class="cl"><span class="s2">    This is useful in workflows where Markdown fragments are later assembled 
</span></span></span><span class="line"><span class="cl"><span class="s2">    into a larger document (e.g., a Hugo `index.md`).
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Parameters:
</span></span></span><span class="line"><span class="cl"><span class="s2">    -----------
</span></span></span><span class="line"><span class="cl"><span class="s2">    dep_file : Path
</span></span></span><span class="line"><span class="cl"><span class="s2">        Path to the dependency file that tracks Markdown fragment filenames.
</span></span></span><span class="line"><span class="cl"><span class="s2">    md_filename : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        The name of the Markdown file to export.
</span></span></span><span class="line"><span class="cl"><span class="s2">    content : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        The Markdown-formatted content to write to the file.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Returns:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    None
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Example:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; export_track_md_deps(Path(&#34;index_dep.txt&#34;), &#34;01_intro.md&#34;, &#34;# Introduction</span><span class="se">\n</span><span class="s2">...&#34;)
</span></span></span><span class="line"><span class="cl"><span class="s2">    ✅ Exported and tracked: 01_intro.md
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">Path</span><span class="p">(</span><span class="n">md_filename</span><span class="p">)</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="n">dep_file</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">md_filename</span> <span class="o">+</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;✅ Exported and tracked: </span><span class="si">{</span><span class="n">md_filename</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>df_info</code> is a simple function to display the information about a DataFrame and the first five rows and last five rows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">df_info</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    Display summary information about a pandas DataFrame.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    This function prints:
</span></span></span><span class="line"><span class="cl"><span class="s2">    - The DataFrame&#39;s column names, shape, and data types via `df.info()`
</span></span></span><span class="line"><span class="cl"><span class="s2">    - The first 5 rows using `df.head()`
</span></span></span><span class="line"><span class="cl"><span class="s2">    - The last 5 rows using `df.tail()`
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    It uses `display()` for better output formatting in environments like Jupyter notebooks.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Parameters:
</span></span></span><span class="line"><span class="cl"><span class="s2">    -----------
</span></span></span><span class="line"><span class="cl"><span class="s2">    df : pd.DataFrame
</span></span></span><span class="line"><span class="cl"><span class="s2">        The DataFrame to inspect.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Returns:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    None
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Example:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; df_info(my_dataframe)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;The columns, shape, and data types are:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;The first 5 rows are:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;The last 5 rows are:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">())</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>df_info_markdown</code> is similar to the <code>df_info</code> function above, except that it coverts the output to markdown instead of displaying it.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">io</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">df_info_markdown</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    Generate a Markdown-formatted summary of a pandas DataFrame.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    This function captures and formats the output of `df.info()`, `df.head()`, 
</span></span></span><span class="line"><span class="cl"><span class="s2">    and `df.tail()` in Markdown for easy inclusion in reports, documentation, 
</span></span></span><span class="line"><span class="cl"><span class="s2">    or web-based rendering (e.g., Hugo or Jupyter export workflows).
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Parameters:
</span></span></span><span class="line"><span class="cl"><span class="s2">    -----------
</span></span></span><span class="line"><span class="cl"><span class="s2">    df : pd.DataFrame
</span></span></span><span class="line"><span class="cl"><span class="s2">        The DataFrame to summarize.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Returns:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    str
</span></span></span><span class="line"><span class="cl"><span class="s2">        A string containing the DataFrame&#39;s info, head, and tail 
</span></span></span><span class="line"><span class="cl"><span class="s2">        formatted in Markdown.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Example:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; print(df_info_markdown(df))
</span></span></span><span class="line"><span class="cl"><span class="s2">    ```text
</span></span></span><span class="line"><span class="cl"><span class="s2">    The columns, shape, and data types are:
</span></span></span><span class="line"><span class="cl"><span class="s2">    &lt;output from df.info()&gt;
</span></span></span><span class="line"><span class="cl"><span class="s2">    ```
</span></span></span><span class="line"><span class="cl"><span class="s2">    The first 5 rows are:
</span></span></span><span class="line"><span class="cl"><span class="s2">    |   | col1 | col2 |
</span></span></span><span class="line"><span class="cl"><span class="s2">    |---|------|------|
</span></span></span><span class="line"><span class="cl"><span class="s2">    | 0 | ...  | ...  |
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    The last 5 rows are:
</span></span></span><span class="line"><span class="cl"><span class="s2">    ...
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">buffer</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Capture df.info() output</span>
</span></span><span class="line"><span class="cl">    <span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">buf</span><span class="o">=</span><span class="n">buffer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">info_str</span> <span class="o">=</span> <span class="n">buffer</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Convert head and tail to Markdown</span>
</span></span><span class="line"><span class="cl">    <span class="n">head_str</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">(</span><span class="n">floatfmt</span><span class="o">=</span><span class="s2">&#34;.2f&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">tail_str</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span><span class="o">.</span><span class="n">to_markdown</span><span class="p">(</span><span class="n">floatfmt</span><span class="o">=</span><span class="s2">&#34;.2f&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">markdown</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;```text&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;The columns, shape, and data types are:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">info_str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;```&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">The first 5 rows are:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">head_str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">The last 5 rows are:</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">tail_str</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">markdown</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></br>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">pandas_set_decimal_places</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">decimal_places</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    Set the number of decimal places displayed for floating-point numbers in pandas.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Parameters:
</span></span></span><span class="line"><span class="cl"><span class="s2">    ----------
</span></span></span><span class="line"><span class="cl"><span class="s2">    decimal_places : int
</span></span></span><span class="line"><span class="cl"><span class="s2">        The number of decimal places to display for float values in pandas DataFrames and Series.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Returns:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    None
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Example:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; dp(3)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; pd.DataFrame([1.23456789])
</span></span></span><span class="line"><span class="cl"><span class="s2">           0
</span></span></span><span class="line"><span class="cl"><span class="s2">    0   1.235
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.float_format&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;%.</span><span class="si">{</span><span class="n">decimal_places</span><span class="si">}</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="n">x</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></br>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">load_data</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">base_directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">ticker</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">asset_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">timeframe</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    Load data from a CSV, Excel, or Pickle file into a pandas DataFrame.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    This function attempts to read a file first as a CSV, then as an Excel file 
</span></span></span><span class="line"><span class="cl"><span class="s2">    (specifically looking for a sheet named &#39;data&#39; and using the &#39;calamine&#39; engine).
</span></span></span><span class="line"><span class="cl"><span class="s2">    If both attempts fail, a ValueError is raised.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Parameters:
</span></span></span><span class="line"><span class="cl"><span class="s2">    -----------
</span></span></span><span class="line"><span class="cl"><span class="s2">    base_directory : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Root path to read data file.
</span></span></span><span class="line"><span class="cl"><span class="s2">    ticker : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Ticker symbol to read.
</span></span></span><span class="line"><span class="cl"><span class="s2">    source : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Name of the data source (e.g., &#39;Yahoo&#39;).
</span></span></span><span class="line"><span class="cl"><span class="s2">    asset_class : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Asset class name (e.g., &#39;Equities&#39;).
</span></span></span><span class="line"><span class="cl"><span class="s2">    timeframe : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Timeframe for the data (e.g., &#39;Daily&#39;, &#39;Month_End&#39;).
</span></span></span><span class="line"><span class="cl"><span class="s2">    
</span></span></span><span class="line"><span class="cl"><span class="s2">    Returns:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    pd.DataFrame
</span></span></span><span class="line"><span class="cl"><span class="s2">        The loaded data.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Raises:
</span></span></span><span class="line"><span class="cl"><span class="s2">    -------
</span></span></span><span class="line"><span class="cl"><span class="s2">    ValueError
</span></span></span><span class="line"><span class="cl"><span class="s2">        If the file could not be loaded as either CSV or Excel.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Example:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    &gt;&gt;&gt; df = load_data(DATA_DIR, &#34;^VIX&#34;, &#34;Yahoo_Finance&#34;, &#34;Indices&#34;)
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Build file paths using pathlib</span>
</span></span><span class="line"><span class="cl">    <span class="n">csv_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">base_directory</span><span class="p">)</span> <span class="o">/</span> <span class="n">source</span> <span class="o">/</span> <span class="n">asset_class</span> <span class="o">/</span> <span class="n">timeframe</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2">.csv&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">csv_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">base_directory</span><span class="p">)</span> <span class="o">/</span> <span class="n">source</span> <span class="o">/</span> <span class="n">asset_class</span> <span class="o">/</span> <span class="n">timeframe</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2">.zip&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">xlsx_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">base_directory</span><span class="p">)</span> <span class="o">/</span> <span class="n">source</span> <span class="o">/</span> <span class="n">asset_class</span> <span class="o">/</span> <span class="n">timeframe</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2">.xlsx&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">pickle_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">base_directory</span><span class="p">)</span> <span class="o">/</span> <span class="n">source</span> <span class="o">/</span> <span class="n">asset_class</span> <span class="o">/</span> <span class="n">timeframe</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2">.pkl&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Try CSV</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">csv_path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">df</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Try Zip</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">csv_path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">df</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Try Excel</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">xlsx_path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">df</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Try Pickle</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="n">pickle_path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">df</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;❌ Unable to load file: </span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2">. Ensure it&#39;s a valid CSV, Excel, Zip, or Pickle file with a &#39;data&#39; sheet (if required).&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="project-specific-functions">Project Specific Functions
</h3><p>Here&rsquo;s the code for the function to pull the VIX data and export to Excel:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yf</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">yf_pull_data</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">base_directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">ticker</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">asset_class</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">excel_export</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">pickle_export</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">output_confirmation</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    Download daily price data from Yahoo Finance and export it.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Parameters:
</span></span></span><span class="line"><span class="cl"><span class="s2">    -----------
</span></span></span><span class="line"><span class="cl"><span class="s2">    base_directory : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Root path to store downloaded data.
</span></span></span><span class="line"><span class="cl"><span class="s2">    ticker : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Ticker symbol to download.
</span></span></span><span class="line"><span class="cl"><span class="s2">    source : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Name of the data source (e.g., &#39;Yahoo&#39;).
</span></span></span><span class="line"><span class="cl"><span class="s2">    asset_class : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Asset class name (e.g., &#39;Equities&#39;).
</span></span></span><span class="line"><span class="cl"><span class="s2">    excel_export : bool
</span></span></span><span class="line"><span class="cl"><span class="s2">        If True, export data to Excel format.
</span></span></span><span class="line"><span class="cl"><span class="s2">    pickle_export : bool
</span></span></span><span class="line"><span class="cl"><span class="s2">        If True, export data to Pickle format.
</span></span></span><span class="line"><span class="cl"><span class="s2">    output_confirmation : bool
</span></span></span><span class="line"><span class="cl"><span class="s2">        If True, print confirmation message.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Returns:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    df : pd.DataFrame
</span></span></span><span class="line"><span class="cl"><span class="s2">        DataFrame containing the downloaded data.
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1"># Download data from YF</span>
</span></span><span class="line"><span class="cl">    <span class="n">df</span> <span class="o">=</span> <span class="n">yf</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">ticker</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Drop the column level with the ticker symbol</span>
</span></span><span class="line"><span class="cl">    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">droplevel</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Reset index</span>
</span></span><span class="line"><span class="cl">    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Remove the &#34;Price&#34; header from the index</span>
</span></span><span class="line"><span class="cl">    <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Reset date column</span>
</span></span><span class="line"><span class="cl">    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Set &#39;Date&#39; column as index</span>
</span></span><span class="line"><span class="cl">    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Drop data from last day because it&#39;s not accrate until end of day</span>
</span></span><span class="line"><span class="cl">    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1"># Create directory</span>
</span></span><span class="line"><span class="cl">    <span class="n">directory</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">base_directory</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">asset_class</span><span class="si">}</span><span class="s2">/Daily&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Export to excel</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">excel_export</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">directory</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2">.xlsx&#34;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s2">&#34;data&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Export to pickle</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">pickle_export</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">directory</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2">.pkl&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Output confirmation</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">output_confirmation</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;The first and last date of data for </span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2"> is: &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">[:</span><span class="mi">1</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Yahoo Finance data complete for </span><span class="si">{</span><span class="n">ticker</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;--------------------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">df</span>
</span></span></code></pre></td></tr></table>
</div>
</div></br>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">mdates</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">mtick</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="kn">import</span> <span class="n">FormatStrFormatter</span><span class="p">,</span> <span class="n">MultipleLocator</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">plot_price</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">price_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">plot_start_date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">plot_end_date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">plot_columns</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">x_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">x_format</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">y_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">y_format</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">y_tick_spacing</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">grid</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">legend</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">export_plot</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">plot_file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    Plot the price data from a DataFrame for a specified date range and columns.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Parameters:
</span></span></span><span class="line"><span class="cl"><span class="s2">    -----------
</span></span></span><span class="line"><span class="cl"><span class="s2">    df : pd.DataFrame
</span></span></span><span class="line"><span class="cl"><span class="s2">        DataFrame containing the price data to plot.
</span></span></span><span class="line"><span class="cl"><span class="s2">    plot_start_date : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Start date for the plot in &#39;YYYY-MM-DD&#39; format.
</span></span></span><span class="line"><span class="cl"><span class="s2">    plot_end_date : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        End date for the plot in &#39;YYYY-MM-DD&#39; format.
</span></span></span><span class="line"><span class="cl"><span class="s2">    plot_columns : str OR list
</span></span></span><span class="line"><span class="cl"><span class="s2">        List of columns to plot from the DataFrame. If none, all columns will be plotted.
</span></span></span><span class="line"><span class="cl"><span class="s2">    title : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Title of the plot.
</span></span></span><span class="line"><span class="cl"><span class="s2">    x_label : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Label for the x-axis.
</span></span></span><span class="line"><span class="cl"><span class="s2">    x_axis_format : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Format for the x-axis date labels.
</span></span></span><span class="line"><span class="cl"><span class="s2">    y_label : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Label for the y-axis.
</span></span></span><span class="line"><span class="cl"><span class="s2">    y_tick_spacing : int
</span></span></span><span class="line"><span class="cl"><span class="s2">        Spacing for the y-axis ticks.
</span></span></span><span class="line"><span class="cl"><span class="s2">    grid : bool
</span></span></span><span class="line"><span class="cl"><span class="s2">        Whether to display a grid on the plot.
</span></span></span><span class="line"><span class="cl"><span class="s2">    legend : bool
</span></span></span><span class="line"><span class="cl"><span class="s2">        Whether to display a legend on the plot.
</span></span></span><span class="line"><span class="cl"><span class="s2">    export_plot : bool
</span></span></span><span class="line"><span class="cl"><span class="s2">        Whether to save the figure as a PNG file.
</span></span></span><span class="line"><span class="cl"><span class="s2">    plot_file_name : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        File name for saving the figure (if save_fig is True).
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Returns:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    None
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># If start date and end date are None, use the entire DataFrame</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">plot_start_date</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">plot_end_date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">df_filtered</span> <span class="o">=</span> <span class="n">price_df</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># If only end date is specified, filter by end date</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="n">plot_start_date</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">plot_end_date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">df_filtered</span> <span class="o">=</span> <span class="n">price_df</span><span class="p">[(</span><span class="n">price_df</span><span class="o">.</span><span class="n">index</span> <span class="o">&lt;=</span> <span class="n">plot_end_date</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># If only start date is specified, filter by start date</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="n">plot_start_date</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">plot_end_date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">df_filtered</span> <span class="o">=</span> <span class="n">price_df</span><span class="p">[(</span><span class="n">price_df</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">plot_start_date</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># If both start date and end date are specified, filter by both</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">df_filtered</span> <span class="o">=</span> <span class="n">price_df</span><span class="p">[(</span><span class="n">price_df</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">plot_start_date</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">price_df</span><span class="o">.</span><span class="n">index</span> <span class="o">&lt;=</span> <span class="n">plot_end_date</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Set plot figure size and background color</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&#34;#F5F5F5&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Plot data</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">plot_columns</span> <span class="o">==</span><span class="s2">&#34;All&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df_filtered</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_filtered</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df_filtered</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">plot_columns</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_filtered</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">df_filtered</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Format X axis</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">x_format</span> <span class="o">==</span> <span class="s2">&#34;Day&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DayLocator</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">%d</span><span class="s2"> %b %Y&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="n">x_format</span> <span class="o">==</span> <span class="s2">&#34;Week&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">WeekdayLocator</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">%d</span><span class="s2"> %b %Y&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="n">x_format</span> <span class="o">==</span> <span class="s2">&#34;Month&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">MonthLocator</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&#34;%b %Y&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="n">x_format</span> <span class="o">==</span> <span class="s2">&#34;Year&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">YearLocator</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&#34;%Y&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Unrecognized x_format: </span><span class="si">{</span><span class="n">x_format</span><span class="si">}</span><span class="s2">. Use &#39;Day&#39;, &#39;Week&#39;, &#39;Month&#39;, or &#39;Year&#39;.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">x_label</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Format Y axis</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">y_format</span> <span class="o">==</span> <span class="s2">&#34;Decimal&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">%.2f</span><span class="s2">&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="n">y_format</span> <span class="o">==</span> <span class="s2">&#34;Percentage&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mtick</span><span class="o">.</span><span class="n">PercentFormatter</span><span class="p">(</span><span class="n">xmax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="n">y_format</span> <span class="o">==</span> <span class="s2">&#34;Scientific&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s2">&#34;</span><span class="si">%.2e</span><span class="s2">&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="n">y_format</span> <span class="o">==</span> <span class="s2">&#34;log&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">yscale</span><span class="p">(</span><span class="s2">&#34;log&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Unrecognized y_format: </span><span class="si">{</span><span class="n">y_format</span><span class="si">}</span><span class="s2">. Use &#39;Decimal&#39;, &#39;Percentage&#39;, or &#39;Scientific&#39;.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="n">y_tick_spacing</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">y_label</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Format title, layout, grid, and legend</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">grid</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">legend</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Save figure and display plot</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">export_plot</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">plot_file_name</span><span class="si">}</span><span class="s2">.png&#34;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s2">&#34;tight&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Display the plot</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="kc">None</span>
</span></span></code></pre></td></tr></table>
</div>
</div></br>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span><span class="lnt">97
</span><span class="lnt">98
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">calc_vix_trade_pnl</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">transaction_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">exp_start_date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">exp_end_date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">trade_start_date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">trade_end_date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    Calculate the profit and loss (PnL) of trades based on transaction data.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Parameters:
</span></span></span><span class="line"><span class="cl"><span class="s2">    -----------
</span></span></span><span class="line"><span class="cl"><span class="s2">    transaction_df : pd.DataFrame
</span></span></span><span class="line"><span class="cl"><span class="s2">        DataFrame containing transaction data.
</span></span></span><span class="line"><span class="cl"><span class="s2">    exp_start_date : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Start date for filtering transactions in &#39;YYYY-MM-DD&#39; format. This is the start of the range for the option expiration date.
</span></span></span><span class="line"><span class="cl"><span class="s2">    exp_end_date : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        End date for filtering transactions in &#39;YYYY-MM-DD&#39; format. This is the end of the range for the option expiration date.
</span></span></span><span class="line"><span class="cl"><span class="s2">    trade_start_date : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Start date for filtering transactions in &#39;YYYY-MM-DD&#39; format. This is the start of the range for the trade date.
</span></span></span><span class="line"><span class="cl"><span class="s2">    trade_end_date : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        End date for filtering transactions in &#39;YYYY-MM-DD&#39; format. This is the end of the range for the trade date.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Returns:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    transactions_data : pd.DataFrame
</span></span></span><span class="line"><span class="cl"><span class="s2">        Dataframe containing the transactions for the specified timeframe.
</span></span></span><span class="line"><span class="cl"><span class="s2">    closed_trades : pd.DataFrame
</span></span></span><span class="line"><span class="cl"><span class="s2">        DataFrame containing the closed trades with realized PnL and percent PnL.
</span></span></span><span class="line"><span class="cl"><span class="s2">    open_trades : pd.DataFrame
</span></span></span><span class="line"><span class="cl"><span class="s2">        DataFrame containing the open trades.
</span></span></span><span class="line"><span class="cl"><span class="s2">    net_PnL_percent_str : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        String representation of the net profit percentage.
</span></span></span><span class="line"><span class="cl"><span class="s2">    net_PnL_str : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        String representation of the net profit and loss in dollars.
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># If start and end dates for trades and expirations are None, use the entire DataFrame</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">exp_start_date</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">exp_end_date</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">trade_start_date</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">trade_end_date</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">transactions_data</span> <span class="o">=</span> <span class="n">transaction_df</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1"># If both start and end dates for trades and expirations are provided then filter by both</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">transactions_data</span> <span class="o">=</span> <span class="n">transaction_df</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="n">transaction_df</span><span class="p">[</span><span class="s1">&#39;Exp_Date&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">exp_start_date</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">transaction_df</span><span class="p">[</span><span class="s1">&#39;Exp_Date&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">exp_end_date</span><span class="p">)</span> <span class="o">&amp;</span>
</span></span><span class="line"><span class="cl">            <span class="p">(</span><span class="n">transaction_df</span><span class="p">[</span><span class="s1">&#39;Trade_Date&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">trade_start_date</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">transaction_df</span><span class="p">[</span><span class="s1">&#39;Trade_Date&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">trade_end_date</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Combine the &#39;Action&#39; and &#39;Symbol&#39; columns to create a unique identifier for each transaction</span>
</span></span><span class="line"><span class="cl">    <span class="n">transactions_data</span><span class="p">[</span><span class="s1">&#39;TradeDate_Action_Symbol_VIX&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">transactions_data</span><span class="p">[</span><span class="s1">&#39;Trade_Date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">+</span> 
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;, &#34;</span> <span class="o">+</span> 
</span></span><span class="line"><span class="cl">        <span class="n">transactions_data</span><span class="p">[</span><span class="s1">&#39;Action&#39;</span><span class="p">]</span> <span class="o">+</span> 
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;, &#34;</span> <span class="o">+</span> 
</span></span><span class="line"><span class="cl">        <span class="n">transactions_data</span><span class="p">[</span><span class="s1">&#39;Symbol&#39;</span><span class="p">]</span> <span class="o">+</span> 
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;, VIX = &#34;</span> <span class="o">+</span> 
</span></span><span class="line"><span class="cl">        <span class="n">transactions_data</span><span class="p">[</span><span class="s1">&#39;Approx_VIX_Level&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Split buys and sells and sum the notional amounts</span>
</span></span><span class="line"><span class="cl">    <span class="n">transactions_sells</span> <span class="o">=</span> <span class="n">transactions_data</span><span class="p">[</span><span class="n">transactions_data</span><span class="p">[</span><span class="s1">&#39;Action&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Sell to Close&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">transactions_sells</span> <span class="o">=</span> <span class="n">transactions_sells</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Symbol&#39;</span><span class="p">,</span> <span class="s1">&#39;Exp_Date&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)[[</span><span class="s1">&#39;Amount&#39;</span><span class="p">,</span> <span class="s1">&#39;Quantity&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">transactions_buys</span> <span class="o">=</span> <span class="n">transactions_data</span><span class="p">[</span><span class="n">transactions_data</span><span class="p">[</span><span class="s1">&#39;Action&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Buy to Open&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">transactions_buys</span> <span class="o">=</span> <span class="n">transactions_buys</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Symbol&#39;</span><span class="p">,</span> <span class="s1">&#39;Exp_Date&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)[[</span><span class="s1">&#39;Amount&#39;</span><span class="p">,</span> <span class="s1">&#39;Quantity&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Merge buys and sells dataframes back together</span>
</span></span><span class="line"><span class="cl">    <span class="n">merged_transactions</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">transactions_buys</span><span class="p">,</span> <span class="n">transactions_sells</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Symbol&#39;</span><span class="p">,</span> <span class="s1">&#39;Exp_Date&#39;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">,</span> <span class="n">suffixes</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;_Buy&#39;</span><span class="p">,</span> <span class="s1">&#39;_Sell&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">merged_transactions</span> <span class="o">=</span> <span class="n">merged_transactions</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Exp_Date&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="n">merged_transactions</span> <span class="o">=</span> <span class="n">merged_transactions</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Identify the closed positions</span>
</span></span><span class="line"><span class="cl">    <span class="n">merged_transactions</span><span class="p">[</span><span class="s1">&#39;Closed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">~</span><span class="n">merged_transactions</span><span class="p">[</span><span class="s1">&#39;Amount_Sell&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">())</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">merged_transactions</span><span class="p">[</span><span class="s1">&#39;Amount_Buy&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">())</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">merged_transactions</span><span class="p">[</span><span class="s1">&#39;Quantity_Buy&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">merged_transactions</span><span class="p">[</span><span class="s1">&#39;Quantity_Sell&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Create a new dataframe for closed positions</span>
</span></span><span class="line"><span class="cl">    <span class="n">closed_trades</span> <span class="o">=</span> <span class="n">merged_transactions</span><span class="p">[</span><span class="n">merged_transactions</span><span class="p">[</span><span class="s1">&#39;Closed&#39;</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl">    <span class="n">closed_trades</span> <span class="o">=</span> <span class="n">closed_trades</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">closed_trades</span><span class="p">[</span><span class="s1">&#39;Realized_PnL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">closed_trades</span><span class="p">[</span><span class="s1">&#39;Amount_Sell&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">closed_trades</span><span class="p">[</span><span class="s1">&#39;Amount_Buy&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">closed_trades</span><span class="p">[</span><span class="s1">&#39;Percent_PnL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">closed_trades</span><span class="p">[</span><span class="s1">&#39;Realized_PnL&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">closed_trades</span><span class="p">[</span><span class="s1">&#39;Amount_Buy&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">closed_trades</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Closed&#39;</span><span class="p">,</span> <span class="s1">&#39;Exp_Date&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">closed_trades</span><span class="p">[</span><span class="s1">&#39;Quantity_Sell&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">closed_trades</span><span class="p">[</span><span class="s1">&#39;Quantity_Sell&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Calculate the net % PnL and $ PnL</span>
</span></span><span class="line"><span class="cl">    <span class="n">net_PnL_percent</span> <span class="o">=</span> <span class="n">closed_trades</span><span class="p">[</span><span class="s1">&#39;Realized_PnL&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">closed_trades</span><span class="p">[</span><span class="s1">&#39;Amount_Buy&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">net_PnL_percent_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">net_PnL_percent</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">%&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">net_PnL</span> <span class="o">=</span> <span class="n">closed_trades</span><span class="p">[</span><span class="s1">&#39;Realized_PnL&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">net_PnL_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;$</span><span class="si">{</span><span class="n">net_PnL</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Create a new dataframe for open positions</span>
</span></span><span class="line"><span class="cl">    <span class="n">open_trades</span> <span class="o">=</span> <span class="n">merged_transactions</span><span class="p">[</span><span class="o">~</span><span class="n">merged_transactions</span><span class="p">[</span><span class="s1">&#39;Closed&#39;</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl">    <span class="n">open_trades</span> <span class="o">=</span> <span class="n">open_trades</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">open_trades</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Closed&#39;</span><span class="p">,</span> <span class="s1">&#39;Amount_Sell&#39;</span><span class="p">,</span> <span class="s1">&#39;Quantity_Sell&#39;</span><span class="p">,</span> <span class="s1">&#39;Exp_Date&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">transactions_data</span><span class="p">,</span> <span class="n">closed_trades</span><span class="p">,</span> <span class="n">open_trades</span><span class="p">,</span> <span class="n">net_PnL_percent_str</span><span class="p">,</span> <span class="n">net_PnL_str</span>
</span></span></code></pre></td></tr></table>
</div>
</div></br>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">mdates</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="kn">import</span> <span class="n">MultipleLocator</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">plot_vix_with_trades</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">vix_price_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">trades_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">plot_start_date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">plot_end_date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">x_tick_spacing</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">y_tick_spacing</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">index_number</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">export_plot</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    Plot the VIX daily high and low prices, along with the VIX spikes, and trades.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Parameters:
</span></span></span><span class="line"><span class="cl"><span class="s2">    -----------
</span></span></span><span class="line"><span class="cl"><span class="s2">    vix_price_df : pd.DataFrame
</span></span></span><span class="line"><span class="cl"><span class="s2">        Dataframe containing the VIX price data to plot.
</span></span></span><span class="line"><span class="cl"><span class="s2">    trades_df : pd.DataFrame
</span></span></span><span class="line"><span class="cl"><span class="s2">        Dataframe containing the trades data.
</span></span></span><span class="line"><span class="cl"><span class="s2">    plot_start_date : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Start date for the plot in &#39;YYYY-MM-DD&#39; format.
</span></span></span><span class="line"><span class="cl"><span class="s2">    plot_end_date : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        End date for the plot in &#39;YYYY-MM-DD&#39; format.
</span></span></span><span class="line"><span class="cl"><span class="s2">    index_number : str
</span></span></span><span class="line"><span class="cl"><span class="s2">        Index number to be used in the file name of the plot export.
</span></span></span><span class="line"><span class="cl"><span class="s2">    export_plot : bool
</span></span></span><span class="line"><span class="cl"><span class="s2">        Whether to save the figure as a PNG file.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Returns:
</span></span></span><span class="line"><span class="cl"><span class="s2">    --------
</span></span></span><span class="line"><span class="cl"><span class="s2">    vix_data : pd.DataFrame
</span></span></span><span class="line"><span class="cl"><span class="s2">        Dataframe containing the VIX price data for the specified timeframe.
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Create temporary dataframe for the specified date range</span>
</span></span><span class="line"><span class="cl">    <span class="n">vix_data</span> <span class="o">=</span> <span class="n">vix_price_df</span><span class="p">[(</span><span class="n">vix_price_df</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="n">plot_start_date</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">vix_price_df</span><span class="o">.</span><span class="n">index</span> <span class="o">&lt;=</span> <span class="n">plot_end_date</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Set plot figure size and background color</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">facecolor</span><span class="o">=</span><span class="s2">&#34;#F5F5F5&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Plot VIX high and low price data</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">vix_data</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">vix_data</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;High&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;steelblue&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">vix_data</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">vix_data</span><span class="p">[</span><span class="s1">&#39;Low&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Low&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Plot VIX spikes</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">vix_data</span><span class="p">[</span><span class="n">vix_data</span><span class="p">[</span><span class="s1">&#39;Spike_SMA&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">vix_data</span><span class="p">[</span><span class="n">vix_data</span><span class="p">[</span><span class="s1">&#39;Spike_SMA&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">][</span><span class="s1">&#39;High&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Spike (High &gt; 1.25 * 10 Day High SMA)&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1"># Plot trades</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">trades_df</span><span class="p">[</span><span class="s1">&#39;Trade_Date&#39;</span><span class="p">],</span> <span class="n">trades_df</span><span class="p">[</span><span class="s1">&#39;Approx_VIX_Level&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Trades&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Annotate each point in trades_df with the corresponding Action_Symbol</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">trades_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Trade_Date&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Approx_VIX_Level&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">row</span><span class="p">[</span><span class="s1">&#39;TradeDate_Action_Symbol_VIX&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Format X axis</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DayLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="n">x_tick_spacing</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s2">&#34;%Y-%m-</span><span class="si">%d</span><span class="s2">&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&#34;Date&#34;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Format Y axis</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">MultipleLocator</span><span class="p">(</span><span class="n">y_tick_spacing</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&#34;VIX&#34;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Format title, layout, grid, and legend</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;CBOE Volatility Index (VIX), VIX Spikes, Trades, </span><span class="si">{</span><span class="n">plot_start_date</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">plot_end_date</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Save figure and display plot</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">export_plot</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">index_number</span><span class="si">}</span><span class="s2">_VIX_Spike_Trades_</span><span class="si">{</span><span class="n">plot_start_date</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">plot_end_date</span><span class="si">}</span><span class="s2">.png&#34;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s2">&#34;tight&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1"># Display the plot</span>
</span></span><span class="line"><span class="cl">    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">vix_data</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="data-overview-vix">Data Overview (VIX)
</h2><h3 id="acquire-cboe-volatility-index-vix-data">Acquire CBOE Volatility Index (VIX) Data
</h3><p>First, let&rsquo;s get the data:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">yf_pull_data</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">base_directory</span><span class="o">=</span><span class="n">DATA_DIR</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">ticker</span><span class="o">=</span><span class="s2">&#34;^VIX&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">source</span><span class="o">=</span><span class="s2">&#34;Yahoo_Finance&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">asset_class</span><span class="o">=</span><span class="s2">&#34;Indices&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">excel_export</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">pickle_export</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">output_confirmation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="load-data---vix">Load Data - VIX
</h3><p>Now that we have the data, let&rsquo;s load it up and take a look:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># Set decimal places</span>
</span></span><span class="line"><span class="cl"><span class="n">pandas_set_decimal_places</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># VIX</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">base_directory</span><span class="o">=</span><span class="n">DATA_DIR</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">ticker</span><span class="o">=</span><span class="s2">&#34;^VIX&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">source</span><span class="o">=</span><span class="s2">&#34;Yahoo_Finance&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">asset_class</span><span class="o">=</span><span class="s2">&#34;Indices&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">timeframe</span><span class="o">=</span><span class="s2">&#34;Daily&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Set &#39;Date&#39; column as datetime</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Drop &#39;Volume&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Volume&#39;</span><span class="p">},</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Set Date as index</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Check to see if there are any NaN values</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Forward fill to clean up missing data</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ffill</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="dataframe-info---vix">DataFrame Info - VIX
</h3><p>Now, running:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">df_info</span><span class="p">(</span><span class="n">vix</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Gives us the following:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">The columns, shape, and data types are:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
</span></span><span class="line"><span class="cl">DatetimeIndex: 8915 entries, 1990-01-02 to 2025-05-23
</span></span><span class="line"><span class="cl">Data columns (total 4 columns):
</span></span><span class="line"><span class="cl"> #   Column  Non-Null Count  Dtype  
</span></span><span class="line"><span class="cl">---  ------  --------------  -----  
</span></span><span class="line"><span class="cl"> 0   Close   8915 non-null   float64
</span></span><span class="line"><span class="cl"> 1   High    8915 non-null   float64
</span></span><span class="line"><span class="cl"> 2   Low     8915 non-null   float64
</span></span><span class="line"><span class="cl"> 3   Open    8915 non-null   float64
</span></span><span class="line"><span class="cl">dtypes: float64(4)
</span></span><span class="line"><span class="cl">memory usage: 348.2 KB
</span></span></code></pre></td></tr></table>
</div>
</div><p>The first 5 rows are:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">Date</th>
          <th style="text-align: right">Close</th>
          <th style="text-align: right">High</th>
          <th style="text-align: right">Low</th>
          <th style="text-align: right">Open</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">1990-01-02 00:00:00</td>
          <td style="text-align: right">17.24</td>
          <td style="text-align: right">17.24</td>
          <td style="text-align: right">17.24</td>
          <td style="text-align: right">17.24</td>
      </tr>
      <tr>
          <td style="text-align: left">1990-01-03 00:00:00</td>
          <td style="text-align: right">18.19</td>
          <td style="text-align: right">18.19</td>
          <td style="text-align: right">18.19</td>
          <td style="text-align: right">18.19</td>
      </tr>
      <tr>
          <td style="text-align: left">1990-01-04 00:00:00</td>
          <td style="text-align: right">19.22</td>
          <td style="text-align: right">19.22</td>
          <td style="text-align: right">19.22</td>
          <td style="text-align: right">19.22</td>
      </tr>
      <tr>
          <td style="text-align: left">1990-01-05 00:00:00</td>
          <td style="text-align: right">20.11</td>
          <td style="text-align: right">20.11</td>
          <td style="text-align: right">20.11</td>
          <td style="text-align: right">20.11</td>
      </tr>
      <tr>
          <td style="text-align: left">1990-01-08 00:00:00</td>
          <td style="text-align: right">20.26</td>
          <td style="text-align: right">20.26</td>
          <td style="text-align: right">20.26</td>
          <td style="text-align: right">20.26</td>
      </tr>
  </tbody>
</table></div>
<p>The last 5 rows are:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">Date</th>
          <th style="text-align: right">Close</th>
          <th style="text-align: right">High</th>
          <th style="text-align: right">Low</th>
          <th style="text-align: right">Open</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2025-05-19 00:00:00</td>
          <td style="text-align: right">18.14</td>
          <td style="text-align: right">19.92</td>
          <td style="text-align: right">17.92</td>
          <td style="text-align: right">19.84</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-20 00:00:00</td>
          <td style="text-align: right">18.09</td>
          <td style="text-align: right">18.68</td>
          <td style="text-align: right">17.70</td>
          <td style="text-align: right">18.46</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-21 00:00:00</td>
          <td style="text-align: right">20.87</td>
          <td style="text-align: right">21.05</td>
          <td style="text-align: right">17.77</td>
          <td style="text-align: right">18.77</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-22 00:00:00</td>
          <td style="text-align: right">20.28</td>
          <td style="text-align: right">22.07</td>
          <td style="text-align: right">19.64</td>
          <td style="text-align: right">20.62</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-23 00:00:00</td>
          <td style="text-align: right">22.29</td>
          <td style="text-align: right">25.53</td>
          <td style="text-align: right">19.83</td>
          <td style="text-align: right">20.14</td>
      </tr>
  </tbody>
</table></div>
<h3 id="statistics---vix">Statistics - VIX
</h3><p>Some interesting statistics jump out at us when we look at the mean, standard deviation, minimum, and maximum values for the full dataset. The following code:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">vix_stats</span> <span class="o">=</span> <span class="n">vix</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">num_std</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">num_std</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">vix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="sa">f</span><span class="s2">&#34;mean + </span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2"> std&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;Open&#39;</span><span class="p">:</span> <span class="n">vix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">][</span><span class="s1">&#39;Open&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span> <span class="o">*</span> <span class="n">vix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">][</span><span class="s1">&#39;Open&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;High&#39;</span><span class="p">:</span> <span class="n">vix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">][</span><span class="s1">&#39;High&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span> <span class="o">*</span> <span class="n">vix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">][</span><span class="s1">&#39;High&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;Low&#39;</span><span class="p">:</span> <span class="n">vix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">][</span><span class="s1">&#39;Low&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span> <span class="o">*</span> <span class="n">vix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">][</span><span class="s1">&#39;Low&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;Close&#39;</span><span class="p">:</span> <span class="n">vix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">][</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span> <span class="o">*</span> <span class="n">vix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">][</span><span class="s1">&#39;Close&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">display</span><span class="p">(</span><span class="n">vix_stats</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Gives us:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left"></th>
          <th style="text-align: right">Close</th>
          <th style="text-align: right">High</th>
          <th style="text-align: right">Low</th>
          <th style="text-align: right">Open</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">count</td>
          <td style="text-align: right">8915.00</td>
          <td style="text-align: right">8915.00</td>
          <td style="text-align: right">8915.00</td>
          <td style="text-align: right">8915.00</td>
      </tr>
      <tr>
          <td style="text-align: left">mean</td>
          <td style="text-align: right">19.50</td>
          <td style="text-align: right">20.41</td>
          <td style="text-align: right">18.82</td>
          <td style="text-align: right">19.59</td>
      </tr>
      <tr>
          <td style="text-align: left">std</td>
          <td style="text-align: right">7.84</td>
          <td style="text-align: right">8.40</td>
          <td style="text-align: right">7.39</td>
          <td style="text-align: right">7.92</td>
      </tr>
      <tr>
          <td style="text-align: left">min</td>
          <td style="text-align: right">9.14</td>
          <td style="text-align: right">9.31</td>
          <td style="text-align: right">8.56</td>
          <td style="text-align: right">9.01</td>
      </tr>
      <tr>
          <td style="text-align: left">25%</td>
          <td style="text-align: right">13.86</td>
          <td style="text-align: right">14.53</td>
          <td style="text-align: right">13.40</td>
          <td style="text-align: right">13.93</td>
      </tr>
      <tr>
          <td style="text-align: left">50%</td>
          <td style="text-align: right">17.66</td>
          <td style="text-align: right">18.38</td>
          <td style="text-align: right">17.07</td>
          <td style="text-align: right">17.70</td>
      </tr>
      <tr>
          <td style="text-align: left">75%</td>
          <td style="text-align: right">22.84</td>
          <td style="text-align: right">23.85</td>
          <td style="text-align: right">22.15</td>
          <td style="text-align: right">22.99</td>
      </tr>
      <tr>
          <td style="text-align: left">max</td>
          <td style="text-align: right">82.69</td>
          <td style="text-align: right">89.53</td>
          <td style="text-align: right">72.76</td>
          <td style="text-align: right">82.69</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + -1 std</td>
          <td style="text-align: right">11.66</td>
          <td style="text-align: right">12.01</td>
          <td style="text-align: right">11.43</td>
          <td style="text-align: right">11.67</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + 0 std</td>
          <td style="text-align: right">19.50</td>
          <td style="text-align: right">20.41</td>
          <td style="text-align: right">18.82</td>
          <td style="text-align: right">19.59</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + 1 std</td>
          <td style="text-align: right">27.34</td>
          <td style="text-align: right">28.81</td>
          <td style="text-align: right">26.22</td>
          <td style="text-align: right">27.50</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + 2 std</td>
          <td style="text-align: right">35.17</td>
          <td style="text-align: right">37.20</td>
          <td style="text-align: right">33.61</td>
          <td style="text-align: right">35.42</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + 3 std</td>
          <td style="text-align: right">43.01</td>
          <td style="text-align: right">45.60</td>
          <td style="text-align: right">41.00</td>
          <td style="text-align: right">43.33</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + 4 std</td>
          <td style="text-align: right">50.85</td>
          <td style="text-align: right">54.00</td>
          <td style="text-align: right">48.40</td>
          <td style="text-align: right">51.25</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + 5 std</td>
          <td style="text-align: right">58.69</td>
          <td style="text-align: right">62.40</td>
          <td style="text-align: right">55.79</td>
          <td style="text-align: right">59.16</td>
      </tr>
  </tbody>
</table></div>
<p>We can also run the statistics individually for each year:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># Group by year and calculate mean and std for OHLC</span>
</span></span><span class="line"><span class="cl"><span class="n">vix_stats_by_year</span> <span class="o">=</span> <span class="n">vix</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">vix</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span><span class="p">)[[</span><span class="s2">&#34;Open&#34;</span><span class="p">,</span> <span class="s2">&#34;High&#34;</span><span class="p">,</span> <span class="s2">&#34;Low&#34;</span><span class="p">,</span> <span class="s2">&#34;Close&#34;</span><span class="p">]]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s2">&#34;mean&#34;</span><span class="p">,</span> <span class="s2">&#34;std&#34;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Flatten the column MultiIndex</span>
</span></span><span class="line"><span class="cl"><span class="n">vix_stats_by_year</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;_&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">vix_stats_by_year</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">vix_stats_by_year</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;Year&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">display</span><span class="p">(</span><span class="n">vix_stats_by_year</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Gives us:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: right">Year</th>
          <th style="text-align: right">Open_mean</th>
          <th style="text-align: right">Open_std</th>
          <th style="text-align: right">High_mean</th>
          <th style="text-align: right">High_std</th>
          <th style="text-align: right">Low_mean</th>
          <th style="text-align: right">Low_std</th>
          <th style="text-align: right">Close_mean</th>
          <th style="text-align: right">Close_std</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: right">1990</td>
          <td style="text-align: right">23.06</td>
          <td style="text-align: right">4.74</td>
          <td style="text-align: right">23.06</td>
          <td style="text-align: right">4.74</td>
          <td style="text-align: right">23.06</td>
          <td style="text-align: right">4.74</td>
          <td style="text-align: right">23.06</td>
          <td style="text-align: right">4.74</td>
      </tr>
      <tr>
          <td style="text-align: right">1991</td>
          <td style="text-align: right">18.38</td>
          <td style="text-align: right">3.68</td>
          <td style="text-align: right">18.38</td>
          <td style="text-align: right">3.68</td>
          <td style="text-align: right">18.38</td>
          <td style="text-align: right">3.68</td>
          <td style="text-align: right">18.38</td>
          <td style="text-align: right">3.68</td>
      </tr>
      <tr>
          <td style="text-align: right">1992</td>
          <td style="text-align: right">15.23</td>
          <td style="text-align: right">2.26</td>
          <td style="text-align: right">16.03</td>
          <td style="text-align: right">2.19</td>
          <td style="text-align: right">14.85</td>
          <td style="text-align: right">2.14</td>
          <td style="text-align: right">15.45</td>
          <td style="text-align: right">2.12</td>
      </tr>
      <tr>
          <td style="text-align: right">1993</td>
          <td style="text-align: right">12.70</td>
          <td style="text-align: right">1.37</td>
          <td style="text-align: right">13.34</td>
          <td style="text-align: right">1.40</td>
          <td style="text-align: right">12.25</td>
          <td style="text-align: right">1.28</td>
          <td style="text-align: right">12.69</td>
          <td style="text-align: right">1.33</td>
      </tr>
      <tr>
          <td style="text-align: right">1994</td>
          <td style="text-align: right">13.79</td>
          <td style="text-align: right">2.06</td>
          <td style="text-align: right">14.58</td>
          <td style="text-align: right">2.28</td>
          <td style="text-align: right">13.38</td>
          <td style="text-align: right">1.99</td>
          <td style="text-align: right">13.93</td>
          <td style="text-align: right">2.07</td>
      </tr>
      <tr>
          <td style="text-align: right">1995</td>
          <td style="text-align: right">12.27</td>
          <td style="text-align: right">1.03</td>
          <td style="text-align: right">12.93</td>
          <td style="text-align: right">1.07</td>
          <td style="text-align: right">11.96</td>
          <td style="text-align: right">0.98</td>
          <td style="text-align: right">12.39</td>
          <td style="text-align: right">0.97</td>
      </tr>
      <tr>
          <td style="text-align: right">1996</td>
          <td style="text-align: right">16.31</td>
          <td style="text-align: right">1.92</td>
          <td style="text-align: right">16.99</td>
          <td style="text-align: right">2.12</td>
          <td style="text-align: right">15.94</td>
          <td style="text-align: right">1.82</td>
          <td style="text-align: right">16.44</td>
          <td style="text-align: right">1.94</td>
      </tr>
      <tr>
          <td style="text-align: right">1997</td>
          <td style="text-align: right">22.43</td>
          <td style="text-align: right">4.33</td>
          <td style="text-align: right">23.11</td>
          <td style="text-align: right">4.56</td>
          <td style="text-align: right">21.85</td>
          <td style="text-align: right">3.98</td>
          <td style="text-align: right">22.38</td>
          <td style="text-align: right">4.14</td>
      </tr>
      <tr>
          <td style="text-align: right">1998</td>
          <td style="text-align: right">25.68</td>
          <td style="text-align: right">6.96</td>
          <td style="text-align: right">26.61</td>
          <td style="text-align: right">7.36</td>
          <td style="text-align: right">24.89</td>
          <td style="text-align: right">6.58</td>
          <td style="text-align: right">25.60</td>
          <td style="text-align: right">6.86</td>
      </tr>
      <tr>
          <td style="text-align: right">1999</td>
          <td style="text-align: right">24.39</td>
          <td style="text-align: right">2.90</td>
          <td style="text-align: right">25.20</td>
          <td style="text-align: right">3.01</td>
          <td style="text-align: right">23.75</td>
          <td style="text-align: right">2.76</td>
          <td style="text-align: right">24.37</td>
          <td style="text-align: right">2.88</td>
      </tr>
      <tr>
          <td style="text-align: right">2000</td>
          <td style="text-align: right">23.41</td>
          <td style="text-align: right">3.43</td>
          <td style="text-align: right">24.10</td>
          <td style="text-align: right">3.66</td>
          <td style="text-align: right">22.75</td>
          <td style="text-align: right">3.19</td>
          <td style="text-align: right">23.32</td>
          <td style="text-align: right">3.41</td>
      </tr>
      <tr>
          <td style="text-align: right">2001</td>
          <td style="text-align: right">26.04</td>
          <td style="text-align: right">4.98</td>
          <td style="text-align: right">26.64</td>
          <td style="text-align: right">5.19</td>
          <td style="text-align: right">25.22</td>
          <td style="text-align: right">4.61</td>
          <td style="text-align: right">25.75</td>
          <td style="text-align: right">4.78</td>
      </tr>
      <tr>
          <td style="text-align: right">2002</td>
          <td style="text-align: right">27.53</td>
          <td style="text-align: right">7.03</td>
          <td style="text-align: right">28.28</td>
          <td style="text-align: right">7.25</td>
          <td style="text-align: right">26.60</td>
          <td style="text-align: right">6.64</td>
          <td style="text-align: right">27.29</td>
          <td style="text-align: right">6.91</td>
      </tr>
      <tr>
          <td style="text-align: right">2003</td>
          <td style="text-align: right">22.21</td>
          <td style="text-align: right">5.31</td>
          <td style="text-align: right">22.61</td>
          <td style="text-align: right">5.35</td>
          <td style="text-align: right">21.64</td>
          <td style="text-align: right">5.18</td>
          <td style="text-align: right">21.98</td>
          <td style="text-align: right">5.24</td>
      </tr>
      <tr>
          <td style="text-align: right">2004</td>
          <td style="text-align: right">15.59</td>
          <td style="text-align: right">1.93</td>
          <td style="text-align: right">16.05</td>
          <td style="text-align: right">2.02</td>
          <td style="text-align: right">15.05</td>
          <td style="text-align: right">1.79</td>
          <td style="text-align: right">15.48</td>
          <td style="text-align: right">1.92</td>
      </tr>
      <tr>
          <td style="text-align: right">2005</td>
          <td style="text-align: right">12.84</td>
          <td style="text-align: right">1.44</td>
          <td style="text-align: right">13.28</td>
          <td style="text-align: right">1.59</td>
          <td style="text-align: right">12.39</td>
          <td style="text-align: right">1.32</td>
          <td style="text-align: right">12.81</td>
          <td style="text-align: right">1.47</td>
      </tr>
      <tr>
          <td style="text-align: right">2006</td>
          <td style="text-align: right">12.90</td>
          <td style="text-align: right">2.18</td>
          <td style="text-align: right">13.33</td>
          <td style="text-align: right">2.46</td>
          <td style="text-align: right">12.38</td>
          <td style="text-align: right">1.96</td>
          <td style="text-align: right">12.81</td>
          <td style="text-align: right">2.25</td>
      </tr>
      <tr>
          <td style="text-align: right">2007</td>
          <td style="text-align: right">17.59</td>
          <td style="text-align: right">5.36</td>
          <td style="text-align: right">18.44</td>
          <td style="text-align: right">5.76</td>
          <td style="text-align: right">16.75</td>
          <td style="text-align: right">4.95</td>
          <td style="text-align: right">17.54</td>
          <td style="text-align: right">5.36</td>
      </tr>
      <tr>
          <td style="text-align: right">2008</td>
          <td style="text-align: right">32.83</td>
          <td style="text-align: right">16.41</td>
          <td style="text-align: right">34.57</td>
          <td style="text-align: right">17.83</td>
          <td style="text-align: right">30.96</td>
          <td style="text-align: right">14.96</td>
          <td style="text-align: right">32.69</td>
          <td style="text-align: right">16.38</td>
      </tr>
      <tr>
          <td style="text-align: right">2009</td>
          <td style="text-align: right">31.75</td>
          <td style="text-align: right">9.20</td>
          <td style="text-align: right">32.78</td>
          <td style="text-align: right">9.61</td>
          <td style="text-align: right">30.50</td>
          <td style="text-align: right">8.63</td>
          <td style="text-align: right">31.48</td>
          <td style="text-align: right">9.08</td>
      </tr>
      <tr>
          <td style="text-align: right">2010</td>
          <td style="text-align: right">22.73</td>
          <td style="text-align: right">5.29</td>
          <td style="text-align: right">23.69</td>
          <td style="text-align: right">5.82</td>
          <td style="text-align: right">21.69</td>
          <td style="text-align: right">4.61</td>
          <td style="text-align: right">22.55</td>
          <td style="text-align: right">5.27</td>
      </tr>
      <tr>
          <td style="text-align: right">2011</td>
          <td style="text-align: right">24.27</td>
          <td style="text-align: right">8.17</td>
          <td style="text-align: right">25.40</td>
          <td style="text-align: right">8.78</td>
          <td style="text-align: right">23.15</td>
          <td style="text-align: right">7.59</td>
          <td style="text-align: right">24.20</td>
          <td style="text-align: right">8.14</td>
      </tr>
      <tr>
          <td style="text-align: right">2012</td>
          <td style="text-align: right">17.93</td>
          <td style="text-align: right">2.60</td>
          <td style="text-align: right">18.59</td>
          <td style="text-align: right">2.72</td>
          <td style="text-align: right">17.21</td>
          <td style="text-align: right">2.37</td>
          <td style="text-align: right">17.80</td>
          <td style="text-align: right">2.54</td>
      </tr>
      <tr>
          <td style="text-align: right">2013</td>
          <td style="text-align: right">14.29</td>
          <td style="text-align: right">1.67</td>
          <td style="text-align: right">14.82</td>
          <td style="text-align: right">1.88</td>
          <td style="text-align: right">13.80</td>
          <td style="text-align: right">1.51</td>
          <td style="text-align: right">14.23</td>
          <td style="text-align: right">1.74</td>
      </tr>
      <tr>
          <td style="text-align: right">2014</td>
          <td style="text-align: right">14.23</td>
          <td style="text-align: right">2.65</td>
          <td style="text-align: right">14.95</td>
          <td style="text-align: right">3.02</td>
          <td style="text-align: right">13.61</td>
          <td style="text-align: right">2.21</td>
          <td style="text-align: right">14.17</td>
          <td style="text-align: right">2.62</td>
      </tr>
      <tr>
          <td style="text-align: right">2015</td>
          <td style="text-align: right">16.71</td>
          <td style="text-align: right">3.99</td>
          <td style="text-align: right">17.79</td>
          <td style="text-align: right">5.03</td>
          <td style="text-align: right">15.85</td>
          <td style="text-align: right">3.65</td>
          <td style="text-align: right">16.67</td>
          <td style="text-align: right">4.34</td>
      </tr>
      <tr>
          <td style="text-align: right">2016</td>
          <td style="text-align: right">16.01</td>
          <td style="text-align: right">4.05</td>
          <td style="text-align: right">16.85</td>
          <td style="text-align: right">4.40</td>
          <td style="text-align: right">15.16</td>
          <td style="text-align: right">3.66</td>
          <td style="text-align: right">15.83</td>
          <td style="text-align: right">3.97</td>
      </tr>
      <tr>
          <td style="text-align: right">2017</td>
          <td style="text-align: right">11.14</td>
          <td style="text-align: right">1.34</td>
          <td style="text-align: right">11.72</td>
          <td style="text-align: right">1.54</td>
          <td style="text-align: right">10.64</td>
          <td style="text-align: right">1.16</td>
          <td style="text-align: right">11.09</td>
          <td style="text-align: right">1.36</td>
      </tr>
      <tr>
          <td style="text-align: right">2018</td>
          <td style="text-align: right">16.63</td>
          <td style="text-align: right">5.01</td>
          <td style="text-align: right">18.03</td>
          <td style="text-align: right">6.12</td>
          <td style="text-align: right">15.53</td>
          <td style="text-align: right">4.25</td>
          <td style="text-align: right">16.64</td>
          <td style="text-align: right">5.09</td>
      </tr>
      <tr>
          <td style="text-align: right">2019</td>
          <td style="text-align: right">15.57</td>
          <td style="text-align: right">2.74</td>
          <td style="text-align: right">16.41</td>
          <td style="text-align: right">3.06</td>
          <td style="text-align: right">14.76</td>
          <td style="text-align: right">2.38</td>
          <td style="text-align: right">15.39</td>
          <td style="text-align: right">2.61</td>
      </tr>
      <tr>
          <td style="text-align: right">2020</td>
          <td style="text-align: right">29.54</td>
          <td style="text-align: right">12.45</td>
          <td style="text-align: right">31.46</td>
          <td style="text-align: right">13.89</td>
          <td style="text-align: right">27.51</td>
          <td style="text-align: right">10.85</td>
          <td style="text-align: right">29.25</td>
          <td style="text-align: right">12.34</td>
      </tr>
      <tr>
          <td style="text-align: right">2021</td>
          <td style="text-align: right">19.83</td>
          <td style="text-align: right">3.47</td>
          <td style="text-align: right">21.12</td>
          <td style="text-align: right">4.22</td>
          <td style="text-align: right">18.65</td>
          <td style="text-align: right">2.93</td>
          <td style="text-align: right">19.66</td>
          <td style="text-align: right">3.62</td>
      </tr>
      <tr>
          <td style="text-align: right">2022</td>
          <td style="text-align: right">25.98</td>
          <td style="text-align: right">4.30</td>
          <td style="text-align: right">27.25</td>
          <td style="text-align: right">4.59</td>
          <td style="text-align: right">24.69</td>
          <td style="text-align: right">3.91</td>
          <td style="text-align: right">25.62</td>
          <td style="text-align: right">4.22</td>
      </tr>
      <tr>
          <td style="text-align: right">2023</td>
          <td style="text-align: right">17.12</td>
          <td style="text-align: right">3.17</td>
          <td style="text-align: right">17.83</td>
          <td style="text-align: right">3.58</td>
          <td style="text-align: right">16.36</td>
          <td style="text-align: right">2.89</td>
          <td style="text-align: right">16.87</td>
          <td style="text-align: right">3.14</td>
      </tr>
      <tr>
          <td style="text-align: right">2024</td>
          <td style="text-align: right">15.69</td>
          <td style="text-align: right">3.14</td>
          <td style="text-align: right">16.65</td>
          <td style="text-align: right">4.73</td>
          <td style="text-align: right">14.92</td>
          <td style="text-align: right">2.58</td>
          <td style="text-align: right">15.61</td>
          <td style="text-align: right">3.36</td>
      </tr>
      <tr>
          <td style="text-align: right">2025</td>
          <td style="text-align: right">22.15</td>
          <td style="text-align: right">7.54</td>
          <td style="text-align: right">23.95</td>
          <td style="text-align: right">9.18</td>
          <td style="text-align: right">20.55</td>
          <td style="text-align: right">5.54</td>
          <td style="text-align: right">21.86</td>
          <td style="text-align: right">7.13</td>
      </tr>
  </tbody>
</table></div>
<p>It is interesting to see how much the mean OHLC values vary by year.</p>
<p>And finally, we can run the statistics individually for each month:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># Group by month and calculate mean and std for OHLC</span>
</span></span><span class="line"><span class="cl"><span class="n">vix_stats_by_month</span> <span class="o">=</span> <span class="n">vix</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">vix</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">month</span><span class="p">)[[</span><span class="s2">&#34;Open&#34;</span><span class="p">,</span> <span class="s2">&#34;High&#34;</span><span class="p">,</span> <span class="s2">&#34;Low&#34;</span><span class="p">,</span> <span class="s2">&#34;Close&#34;</span><span class="p">]]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s2">&#34;mean&#34;</span><span class="p">,</span> <span class="s2">&#34;std&#34;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Flatten the column MultiIndex</span>
</span></span><span class="line"><span class="cl"><span class="n">vix_stats_by_month</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;_&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">vix_stats_by_month</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">vix_stats_by_month</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;Month&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">display</span><span class="p">(</span><span class="n">vix_stats_by_month</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Gives us:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: right">Month</th>
          <th style="text-align: right">Open_mean</th>
          <th style="text-align: right">Open_std</th>
          <th style="text-align: right">High_mean</th>
          <th style="text-align: right">High_std</th>
          <th style="text-align: right">Low_mean</th>
          <th style="text-align: right">Low_std</th>
          <th style="text-align: right">Close_mean</th>
          <th style="text-align: right">Close_std</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: right">1</td>
          <td style="text-align: right">19.34</td>
          <td style="text-align: right">7.21</td>
          <td style="text-align: right">20.13</td>
          <td style="text-align: right">7.58</td>
          <td style="text-align: right">18.60</td>
          <td style="text-align: right">6.87</td>
          <td style="text-align: right">19.22</td>
          <td style="text-align: right">7.17</td>
      </tr>
      <tr>
          <td style="text-align: right">2</td>
          <td style="text-align: right">19.67</td>
          <td style="text-align: right">7.22</td>
          <td style="text-align: right">20.51</td>
          <td style="text-align: right">7.65</td>
          <td style="text-align: right">18.90</td>
          <td style="text-align: right">6.81</td>
          <td style="text-align: right">19.58</td>
          <td style="text-align: right">7.13</td>
      </tr>
      <tr>
          <td style="text-align: right">3</td>
          <td style="text-align: right">20.47</td>
          <td style="text-align: right">9.63</td>
          <td style="text-align: right">21.39</td>
          <td style="text-align: right">10.49</td>
          <td style="text-align: right">19.54</td>
          <td style="text-align: right">8.65</td>
          <td style="text-align: right">20.35</td>
          <td style="text-align: right">9.56</td>
      </tr>
      <tr>
          <td style="text-align: right">4</td>
          <td style="text-align: right">19.43</td>
          <td style="text-align: right">7.48</td>
          <td style="text-align: right">20.24</td>
          <td style="text-align: right">7.93</td>
          <td style="text-align: right">18.65</td>
          <td style="text-align: right">6.88</td>
          <td style="text-align: right">19.29</td>
          <td style="text-align: right">7.28</td>
      </tr>
      <tr>
          <td style="text-align: right">5</td>
          <td style="text-align: right">18.60</td>
          <td style="text-align: right">6.05</td>
          <td style="text-align: right">19.40</td>
          <td style="text-align: right">6.45</td>
          <td style="text-align: right">17.89</td>
          <td style="text-align: right">5.64</td>
          <td style="text-align: right">18.51</td>
          <td style="text-align: right">5.97</td>
      </tr>
      <tr>
          <td style="text-align: right">6</td>
          <td style="text-align: right">18.45</td>
          <td style="text-align: right">5.82</td>
          <td style="text-align: right">19.15</td>
          <td style="text-align: right">6.09</td>
          <td style="text-align: right">17.73</td>
          <td style="text-align: right">5.46</td>
          <td style="text-align: right">18.35</td>
          <td style="text-align: right">5.75</td>
      </tr>
      <tr>
          <td style="text-align: right">7</td>
          <td style="text-align: right">17.87</td>
          <td style="text-align: right">5.75</td>
          <td style="text-align: right">18.58</td>
          <td style="text-align: right">5.98</td>
          <td style="text-align: right">17.24</td>
          <td style="text-align: right">5.48</td>
          <td style="text-align: right">17.80</td>
          <td style="text-align: right">5.67</td>
      </tr>
      <tr>
          <td style="text-align: right">8</td>
          <td style="text-align: right">19.17</td>
          <td style="text-align: right">6.74</td>
          <td style="text-align: right">20.12</td>
          <td style="text-align: right">7.45</td>
          <td style="text-align: right">18.44</td>
          <td style="text-align: right">6.38</td>
          <td style="text-align: right">19.18</td>
          <td style="text-align: right">6.87</td>
      </tr>
      <tr>
          <td style="text-align: right">9</td>
          <td style="text-align: right">20.51</td>
          <td style="text-align: right">8.32</td>
          <td style="text-align: right">21.35</td>
          <td style="text-align: right">8.64</td>
          <td style="text-align: right">19.74</td>
          <td style="text-align: right">7.90</td>
          <td style="text-align: right">20.43</td>
          <td style="text-align: right">8.20</td>
      </tr>
      <tr>
          <td style="text-align: right">10</td>
          <td style="text-align: right">21.83</td>
          <td style="text-align: right">10.28</td>
          <td style="text-align: right">22.83</td>
          <td style="text-align: right">11.10</td>
          <td style="text-align: right">20.93</td>
          <td style="text-align: right">9.51</td>
          <td style="text-align: right">21.75</td>
          <td style="text-align: right">10.24</td>
      </tr>
      <tr>
          <td style="text-align: right">11</td>
          <td style="text-align: right">20.34</td>
          <td style="text-align: right">9.65</td>
          <td style="text-align: right">21.04</td>
          <td style="text-align: right">10.03</td>
          <td style="text-align: right">19.55</td>
          <td style="text-align: right">9.02</td>
          <td style="text-align: right">20.16</td>
          <td style="text-align: right">9.52</td>
      </tr>
      <tr>
          <td style="text-align: right">12</td>
          <td style="text-align: right">19.34</td>
          <td style="text-align: right">8.26</td>
          <td style="text-align: right">20.09</td>
          <td style="text-align: right">8.53</td>
          <td style="text-align: right">18.63</td>
          <td style="text-align: right">7.88</td>
          <td style="text-align: right">19.29</td>
          <td style="text-align: right">8.16</td>
      </tr>
  </tbody>
</table></div>
<h3 id="deciles---vix">Deciles - VIX
</h3><p>Here are the levels for each decile, for the full dataset:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">vix_deciles</span> <span class="o">=</span> <span class="n">vix</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">display</span><span class="p">(</span><span class="n">vix_deciles</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Gives us:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: right"></th>
          <th style="text-align: right">Close</th>
          <th style="text-align: right">High</th>
          <th style="text-align: right">Low</th>
          <th style="text-align: right">Open</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: right">0.00</td>
          <td style="text-align: right">9.14</td>
          <td style="text-align: right">9.31</td>
          <td style="text-align: right">8.56</td>
          <td style="text-align: right">9.01</td>
      </tr>
      <tr>
          <td style="text-align: right">0.10</td>
          <td style="text-align: right">12.12</td>
          <td style="text-align: right">12.63</td>
          <td style="text-align: right">11.72</td>
          <td style="text-align: right">12.13</td>
      </tr>
      <tr>
          <td style="text-align: right">0.20</td>
          <td style="text-align: right">13.25</td>
          <td style="text-align: right">13.87</td>
          <td style="text-align: right">12.85</td>
          <td style="text-align: right">13.31</td>
      </tr>
      <tr>
          <td style="text-align: right">0.30</td>
          <td style="text-align: right">14.61</td>
          <td style="text-align: right">15.29</td>
          <td style="text-align: right">14.08</td>
          <td style="text-align: right">14.68</td>
      </tr>
      <tr>
          <td style="text-align: right">0.40</td>
          <td style="text-align: right">16.09</td>
          <td style="text-align: right">16.76</td>
          <td style="text-align: right">15.56</td>
          <td style="text-align: right">16.13</td>
      </tr>
      <tr>
          <td style="text-align: right">0.50</td>
          <td style="text-align: right">17.66</td>
          <td style="text-align: right">18.38</td>
          <td style="text-align: right">17.07</td>
          <td style="text-align: right">17.70</td>
      </tr>
      <tr>
          <td style="text-align: right">0.60</td>
          <td style="text-align: right">19.56</td>
          <td style="text-align: right">20.40</td>
          <td style="text-align: right">19.02</td>
          <td style="text-align: right">19.69</td>
      </tr>
      <tr>
          <td style="text-align: right">0.70</td>
          <td style="text-align: right">21.65</td>
          <td style="text-align: right">22.66</td>
          <td style="text-align: right">21.00</td>
          <td style="text-align: right">21.80</td>
      </tr>
      <tr>
          <td style="text-align: right">0.80</td>
          <td style="text-align: right">24.32</td>
          <td style="text-align: right">25.36</td>
          <td style="text-align: right">23.51</td>
          <td style="text-align: right">24.39</td>
      </tr>
      <tr>
          <td style="text-align: right">0.90</td>
          <td style="text-align: right">28.71</td>
          <td style="text-align: right">30.00</td>
          <td style="text-align: right">27.79</td>
          <td style="text-align: right">28.86</td>
      </tr>
      <tr>
          <td style="text-align: right">1.00</td>
          <td style="text-align: right">82.69</td>
          <td style="text-align: right">89.53</td>
          <td style="text-align: right">72.76</td>
          <td style="text-align: right">82.69</td>
      </tr>
  </tbody>
</table></div>
<h2 id="plots---vix">Plots - VIX
</h2><h3 id="histogram-distribution---vix">Histogram Distribution - VIX
</h3><p>A quick histogram gives us the distribution for the entire dataset:</p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/01_Histogram.png"
	width="3570"
	height="1769"
	
	loading="lazy"
	
		alt="Histogram"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<p>Now, let&rsquo;s add the levels for the mean minus 1 standard deviation, mean, mean plus 1 standard deviation, mean plus 2 standard deviations, mean plus 3 standard deviations, and mean plus 4 standard deviations:</p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/01_Histogram&#43;Mean&#43;SD.png"
	width="3570"
	height="1769"
	
	loading="lazy"
	
		alt="Histogram, Mean, And Standard Deviations"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h3 id="historical-data---vix">Historical Data - VIX
</h3><p>Here&rsquo;s two plots for the dataset. The first covers 1990 - 2009, and the second 2010 - Present. This is the daily high level:</p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/01_VIX_Plot_1990-2009.png"
	width="3570"
	height="1768"
	
	loading="lazy"
	
		alt="VIX Daily High, 1990 - 2009"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/01_VIX_Plot_2010-Present.png"
	width="3566"
	height="1768"
	
	loading="lazy"
	
		alt="VIX Daily High, 2010 - Present"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<p>From these plots, we can see the following:</p>
<ul>
<li>The VIX has really only jumped above 50 several times (GFC, COVID, recently in August of 2024)</li>
<li>The highest levels (&gt; 80) occured only during the GFC &amp; COVID</li>
<li>Interestingly, the VIX did not ever get above 50 during the .com bubble</li>
</ul>
<h2 id="data-overview-vvix">Data Overview (VVIX)
</h2><p>Before moving on to generating a signal, let&rsquo;s run the above data overview code again, but this time for the CBOE VVIX. From the <a class="link" href="https://www.cboe.com/us/indices/dashboard/vvix/"  target="_blank" rel="noopener"
    >CBOE VVIX website</a>:</p>
<p>&ldquo;Volatility is often called a new asset class, and every asset class deserves its own volatility index.  The Cboe VVIX IndexSM represents the expected volatility of the VIX®.  VVIX derives the expected 30-day volatility of VIX by applying the VIX algorithm to VIX options.&rdquo;</p>
<p>Looking at the statistics of the VVIX should give us an idea of the volatility of the VIX.</p>
<h3 id="acquire-cboe-vvix-data">Acquire CBOE VVIX Data
</h3><p>First, let&rsquo;s get the data:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">yf_pull_data</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">base_directory</span><span class="o">=</span><span class="n">DATA_DIR</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">ticker</span><span class="o">=</span><span class="s2">&#34;^VVIX&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">source</span><span class="o">=</span><span class="s2">&#34;Yahoo_Finance&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">asset_class</span><span class="o">=</span><span class="s2">&#34;Indices&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">excel_export</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">pickle_export</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">output_confirmation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="load-data---vvix">Load Data - VVIX
</h3><p>Now that we have the data, let&rsquo;s load it up and take a look:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># Set decimal places</span>
</span></span><span class="line"><span class="cl"><span class="n">pandas_set_decimal_places</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># VVIX</span>
</span></span><span class="line"><span class="cl"><span class="n">vvix</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">base_directory</span><span class="o">=</span><span class="n">DATA_DIR</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">ticker</span><span class="o">=</span><span class="s2">&#34;^VVIX&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">source</span><span class="o">=</span><span class="s2">&#34;Yahoo_Finance&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="n">asset_class</span><span class="o">=</span><span class="s2">&#34;Indices&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">timeframe</span><span class="o">=</span><span class="s2">&#34;Daily&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Set &#39;Date&#39; column as datetime</span>
</span></span><span class="line"><span class="cl"><span class="n">vvix</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">vvix</span><span class="p">[</span><span class="s1">&#39;Date&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Drop &#39;Volume&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">vvix</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Volume&#39;</span><span class="p">},</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Set Date as index</span>
</span></span><span class="line"><span class="cl"><span class="n">vvix</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Date&#39;</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Check to see if there are any NaN values</span>
</span></span><span class="line"><span class="cl"><span class="n">vvix</span><span class="p">[</span><span class="n">vvix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Forward fill to clean up missing data</span>
</span></span><span class="line"><span class="cl"><span class="n">vvix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vvix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ffill</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="dataframe-info---vvix">DataFrame Info - VVIX
</h3><p>Now, running:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">df_info</span><span class="p">(</span><span class="n">vvix</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Gives us the following:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">The columns, shape, and data types are:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
</span></span><span class="line"><span class="cl">DatetimeIndex: 8915 entries, 1990-01-02 to 2025-05-23
</span></span><span class="line"><span class="cl">Data columns (total 4 columns):
</span></span><span class="line"><span class="cl"> #   Column  Non-Null Count  Dtype  
</span></span><span class="line"><span class="cl">---  ------  --------------  -----  
</span></span><span class="line"><span class="cl"> 0   Close   8915 non-null   float64
</span></span><span class="line"><span class="cl"> 1   High    8915 non-null   float64
</span></span><span class="line"><span class="cl"> 2   Low     8915 non-null   float64
</span></span><span class="line"><span class="cl"> 3   Open    8915 non-null   float64
</span></span><span class="line"><span class="cl">dtypes: float64(4)
</span></span><span class="line"><span class="cl">memory usage: 348.2 KB
</span></span></code></pre></td></tr></table>
</div>
</div><p>The first 5 rows are:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">Date</th>
          <th style="text-align: right">Close</th>
          <th style="text-align: right">High</th>
          <th style="text-align: right">Low</th>
          <th style="text-align: right">Open</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">1990-01-02 00:00:00</td>
          <td style="text-align: right">17.24</td>
          <td style="text-align: right">17.24</td>
          <td style="text-align: right">17.24</td>
          <td style="text-align: right">17.24</td>
      </tr>
      <tr>
          <td style="text-align: left">1990-01-03 00:00:00</td>
          <td style="text-align: right">18.19</td>
          <td style="text-align: right">18.19</td>
          <td style="text-align: right">18.19</td>
          <td style="text-align: right">18.19</td>
      </tr>
      <tr>
          <td style="text-align: left">1990-01-04 00:00:00</td>
          <td style="text-align: right">19.22</td>
          <td style="text-align: right">19.22</td>
          <td style="text-align: right">19.22</td>
          <td style="text-align: right">19.22</td>
      </tr>
      <tr>
          <td style="text-align: left">1990-01-05 00:00:00</td>
          <td style="text-align: right">20.11</td>
          <td style="text-align: right">20.11</td>
          <td style="text-align: right">20.11</td>
          <td style="text-align: right">20.11</td>
      </tr>
      <tr>
          <td style="text-align: left">1990-01-08 00:00:00</td>
          <td style="text-align: right">20.26</td>
          <td style="text-align: right">20.26</td>
          <td style="text-align: right">20.26</td>
          <td style="text-align: right">20.26</td>
      </tr>
  </tbody>
</table></div>
<p>The last 5 rows are:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">Date</th>
          <th style="text-align: right">Close</th>
          <th style="text-align: right">High</th>
          <th style="text-align: right">Low</th>
          <th style="text-align: right">Open</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2025-05-19 00:00:00</td>
          <td style="text-align: right">18.14</td>
          <td style="text-align: right">19.92</td>
          <td style="text-align: right">17.92</td>
          <td style="text-align: right">19.84</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-20 00:00:00</td>
          <td style="text-align: right">18.09</td>
          <td style="text-align: right">18.68</td>
          <td style="text-align: right">17.70</td>
          <td style="text-align: right">18.46</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-21 00:00:00</td>
          <td style="text-align: right">20.87</td>
          <td style="text-align: right">21.05</td>
          <td style="text-align: right">17.77</td>
          <td style="text-align: right">18.77</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-22 00:00:00</td>
          <td style="text-align: right">20.28</td>
          <td style="text-align: right">22.07</td>
          <td style="text-align: right">19.64</td>
          <td style="text-align: right">20.62</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-23 00:00:00</td>
          <td style="text-align: right">22.29</td>
          <td style="text-align: right">25.53</td>
          <td style="text-align: right">19.83</td>
          <td style="text-align: right">20.14</td>
      </tr>
  </tbody>
</table></div>
<h3 id="statistics---vvix">Statistics - VVIX
</h3><p>Here are the statistics for the VVIX, generated in the same manner as above for the VIX:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">vvix_stats</span> <span class="o">=</span> <span class="n">vvix</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">num_std</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">num_std</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">vvix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="sa">f</span><span class="s2">&#34;mean + </span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2"> std&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;Open&#39;</span><span class="p">:</span> <span class="n">vvix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">][</span><span class="s1">&#39;Open&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span> <span class="o">*</span> <span class="n">vvix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">][</span><span class="s1">&#39;Open&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;High&#39;</span><span class="p">:</span> <span class="n">vvix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">][</span><span class="s1">&#39;High&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span> <span class="o">*</span> <span class="n">vvix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">][</span><span class="s1">&#39;High&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;Low&#39;</span><span class="p">:</span> <span class="n">vvix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">][</span><span class="s1">&#39;Low&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span> <span class="o">*</span> <span class="n">vvix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">][</span><span class="s1">&#39;Low&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;Close&#39;</span><span class="p">:</span> <span class="n">vvix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">][</span><span class="s1">&#39;Close&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span> <span class="o">*</span> <span class="n">vvix_stats</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">][</span><span class="s1">&#39;Close&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">display</span><span class="p">(</span><span class="n">vvix_stats</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Gives us:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left"></th>
          <th style="text-align: right">Close</th>
          <th style="text-align: right">High</th>
          <th style="text-align: right">Low</th>
          <th style="text-align: right">Open</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">count</td>
          <td style="text-align: right">4618.00</td>
          <td style="text-align: right">4618.00</td>
          <td style="text-align: right">4618.00</td>
          <td style="text-align: right">4618.00</td>
      </tr>
      <tr>
          <td style="text-align: left">mean</td>
          <td style="text-align: right">93.50</td>
          <td style="text-align: right">95.54</td>
          <td style="text-align: right">91.94</td>
          <td style="text-align: right">93.75</td>
      </tr>
      <tr>
          <td style="text-align: left">std</td>
          <td style="text-align: right">16.46</td>
          <td style="text-align: right">18.06</td>
          <td style="text-align: right">15.11</td>
          <td style="text-align: right">16.51</td>
      </tr>
      <tr>
          <td style="text-align: left">min</td>
          <td style="text-align: right">59.74</td>
          <td style="text-align: right">59.74</td>
          <td style="text-align: right">59.31</td>
          <td style="text-align: right">59.31</td>
      </tr>
      <tr>
          <td style="text-align: left">25%</td>
          <td style="text-align: right">82.32</td>
          <td style="text-align: right">83.45</td>
          <td style="text-align: right">81.48</td>
          <td style="text-align: right">82.53</td>
      </tr>
      <tr>
          <td style="text-align: left">50%</td>
          <td style="text-align: right">90.51</td>
          <td style="text-align: right">92.24</td>
          <td style="text-align: right">89.34</td>
          <td style="text-align: right">90.82</td>
      </tr>
      <tr>
          <td style="text-align: left">75%</td>
          <td style="text-align: right">102.22</td>
          <td style="text-align: right">105.06</td>
          <td style="text-align: right">100.00</td>
          <td style="text-align: right">102.57</td>
      </tr>
      <tr>
          <td style="text-align: left">max</td>
          <td style="text-align: right">207.59</td>
          <td style="text-align: right">212.22</td>
          <td style="text-align: right">187.27</td>
          <td style="text-align: right">212.22</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + -1 std</td>
          <td style="text-align: right">77.04</td>
          <td style="text-align: right">77.48</td>
          <td style="text-align: right">76.83</td>
          <td style="text-align: right">77.24</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + 0 std</td>
          <td style="text-align: right">93.50</td>
          <td style="text-align: right">95.54</td>
          <td style="text-align: right">91.94</td>
          <td style="text-align: right">93.75</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + 1 std</td>
          <td style="text-align: right">109.96</td>
          <td style="text-align: right">113.60</td>
          <td style="text-align: right">107.05</td>
          <td style="text-align: right">110.25</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + 2 std</td>
          <td style="text-align: right">126.41</td>
          <td style="text-align: right">131.67</td>
          <td style="text-align: right">122.16</td>
          <td style="text-align: right">126.76</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + 3 std</td>
          <td style="text-align: right">142.87</td>
          <td style="text-align: right">149.73</td>
          <td style="text-align: right">137.27</td>
          <td style="text-align: right">143.27</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + 4 std</td>
          <td style="text-align: right">159.32</td>
          <td style="text-align: right">167.79</td>
          <td style="text-align: right">152.38</td>
          <td style="text-align: right">159.78</td>
      </tr>
      <tr>
          <td style="text-align: left">mean + 5 std</td>
          <td style="text-align: right">175.78</td>
          <td style="text-align: right">185.86</td>
          <td style="text-align: right">167.49</td>
          <td style="text-align: right">176.29</td>
      </tr>
  </tbody>
</table></div>
<p>We can also run the statistics individually for each year:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># Group by year and calculate mean and std for OHLC</span>
</span></span><span class="line"><span class="cl"><span class="n">vvix_stats_by_year</span> <span class="o">=</span> <span class="n">vvix</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">vvix</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span><span class="p">)[[</span><span class="s2">&#34;Open&#34;</span><span class="p">,</span> <span class="s2">&#34;High&#34;</span><span class="p">,</span> <span class="s2">&#34;Low&#34;</span><span class="p">,</span> <span class="s2">&#34;Close&#34;</span><span class="p">]]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s2">&#34;mean&#34;</span><span class="p">,</span> <span class="s2">&#34;std&#34;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Flatten the column MultiIndex</span>
</span></span><span class="line"><span class="cl"><span class="n">vvix_stats_by_year</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;_&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">vvix_stats_by_year</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">vvix_stats_by_year</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;Year&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">display</span><span class="p">(</span><span class="n">vvix_stats_by_year</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Gives us:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: right">Year</th>
          <th style="text-align: right">Open_mean</th>
          <th style="text-align: right">Open_std</th>
          <th style="text-align: right">High_mean</th>
          <th style="text-align: right">High_std</th>
          <th style="text-align: right">Low_mean</th>
          <th style="text-align: right">Low_std</th>
          <th style="text-align: right">Close_mean</th>
          <th style="text-align: right">Close_std</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: right">2007</td>
          <td style="text-align: right">87.68</td>
          <td style="text-align: right">13.31</td>
          <td style="text-align: right">87.68</td>
          <td style="text-align: right">13.31</td>
          <td style="text-align: right">87.68</td>
          <td style="text-align: right">13.31</td>
          <td style="text-align: right">87.68</td>
          <td style="text-align: right">13.31</td>
      </tr>
      <tr>
          <td style="text-align: right">2008</td>
          <td style="text-align: right">81.85</td>
          <td style="text-align: right">15.60</td>
          <td style="text-align: right">81.85</td>
          <td style="text-align: right">15.60</td>
          <td style="text-align: right">81.85</td>
          <td style="text-align: right">15.60</td>
          <td style="text-align: right">81.85</td>
          <td style="text-align: right">15.60</td>
      </tr>
      <tr>
          <td style="text-align: right">2009</td>
          <td style="text-align: right">79.78</td>
          <td style="text-align: right">8.63</td>
          <td style="text-align: right">79.78</td>
          <td style="text-align: right">8.63</td>
          <td style="text-align: right">79.78</td>
          <td style="text-align: right">8.63</td>
          <td style="text-align: right">79.78</td>
          <td style="text-align: right">8.63</td>
      </tr>
      <tr>
          <td style="text-align: right">2010</td>
          <td style="text-align: right">88.36</td>
          <td style="text-align: right">13.07</td>
          <td style="text-align: right">88.36</td>
          <td style="text-align: right">13.07</td>
          <td style="text-align: right">88.36</td>
          <td style="text-align: right">13.07</td>
          <td style="text-align: right">88.36</td>
          <td style="text-align: right">13.07</td>
      </tr>
      <tr>
          <td style="text-align: right">2011</td>
          <td style="text-align: right">92.94</td>
          <td style="text-align: right">10.21</td>
          <td style="text-align: right">92.94</td>
          <td style="text-align: right">10.21</td>
          <td style="text-align: right">92.94</td>
          <td style="text-align: right">10.21</td>
          <td style="text-align: right">92.94</td>
          <td style="text-align: right">10.21</td>
      </tr>
      <tr>
          <td style="text-align: right">2012</td>
          <td style="text-align: right">94.84</td>
          <td style="text-align: right">8.38</td>
          <td style="text-align: right">94.84</td>
          <td style="text-align: right">8.38</td>
          <td style="text-align: right">94.84</td>
          <td style="text-align: right">8.38</td>
          <td style="text-align: right">94.84</td>
          <td style="text-align: right">8.38</td>
      </tr>
      <tr>
          <td style="text-align: right">2013</td>
          <td style="text-align: right">80.52</td>
          <td style="text-align: right">8.97</td>
          <td style="text-align: right">80.52</td>
          <td style="text-align: right">8.97</td>
          <td style="text-align: right">80.52</td>
          <td style="text-align: right">8.97</td>
          <td style="text-align: right">80.52</td>
          <td style="text-align: right">8.97</td>
      </tr>
      <tr>
          <td style="text-align: right">2014</td>
          <td style="text-align: right">83.01</td>
          <td style="text-align: right">14.33</td>
          <td style="text-align: right">83.01</td>
          <td style="text-align: right">14.33</td>
          <td style="text-align: right">83.01</td>
          <td style="text-align: right">14.33</td>
          <td style="text-align: right">83.01</td>
          <td style="text-align: right">14.33</td>
      </tr>
      <tr>
          <td style="text-align: right">2015</td>
          <td style="text-align: right">95.44</td>
          <td style="text-align: right">15.59</td>
          <td style="text-align: right">98.47</td>
          <td style="text-align: right">16.39</td>
          <td style="text-align: right">92.15</td>
          <td style="text-align: right">13.35</td>
          <td style="text-align: right">94.82</td>
          <td style="text-align: right">14.75</td>
      </tr>
      <tr>
          <td style="text-align: right">2016</td>
          <td style="text-align: right">93.36</td>
          <td style="text-align: right">10.02</td>
          <td style="text-align: right">95.82</td>
          <td style="text-align: right">10.86</td>
          <td style="text-align: right">90.54</td>
          <td style="text-align: right">8.99</td>
          <td style="text-align: right">92.80</td>
          <td style="text-align: right">10.07</td>
      </tr>
      <tr>
          <td style="text-align: right">2017</td>
          <td style="text-align: right">90.50</td>
          <td style="text-align: right">8.65</td>
          <td style="text-align: right">92.94</td>
          <td style="text-align: right">9.64</td>
          <td style="text-align: right">87.85</td>
          <td style="text-align: right">7.78</td>
          <td style="text-align: right">90.01</td>
          <td style="text-align: right">8.80</td>
      </tr>
      <tr>
          <td style="text-align: right">2018</td>
          <td style="text-align: right">102.60</td>
          <td style="text-align: right">13.22</td>
          <td style="text-align: right">106.27</td>
          <td style="text-align: right">16.26</td>
          <td style="text-align: right">99.17</td>
          <td style="text-align: right">11.31</td>
          <td style="text-align: right">102.26</td>
          <td style="text-align: right">14.04</td>
      </tr>
      <tr>
          <td style="text-align: right">2019</td>
          <td style="text-align: right">91.28</td>
          <td style="text-align: right">8.43</td>
          <td style="text-align: right">93.61</td>
          <td style="text-align: right">8.98</td>
          <td style="text-align: right">88.90</td>
          <td style="text-align: right">7.86</td>
          <td style="text-align: right">91.03</td>
          <td style="text-align: right">8.36</td>
      </tr>
      <tr>
          <td style="text-align: right">2020</td>
          <td style="text-align: right">118.64</td>
          <td style="text-align: right">19.32</td>
          <td style="text-align: right">121.91</td>
          <td style="text-align: right">20.88</td>
          <td style="text-align: right">115.05</td>
          <td style="text-align: right">17.37</td>
          <td style="text-align: right">118.36</td>
          <td style="text-align: right">19.39</td>
      </tr>
      <tr>
          <td style="text-align: right">2021</td>
          <td style="text-align: right">115.51</td>
          <td style="text-align: right">9.37</td>
          <td style="text-align: right">119.29</td>
          <td style="text-align: right">11.70</td>
          <td style="text-align: right">111.99</td>
          <td style="text-align: right">8.14</td>
          <td style="text-align: right">115.32</td>
          <td style="text-align: right">10.20</td>
      </tr>
      <tr>
          <td style="text-align: right">2022</td>
          <td style="text-align: right">102.58</td>
          <td style="text-align: right">18.01</td>
          <td style="text-align: right">105.32</td>
          <td style="text-align: right">19.16</td>
          <td style="text-align: right">99.17</td>
          <td style="text-align: right">16.81</td>
          <td style="text-align: right">101.81</td>
          <td style="text-align: right">17.81</td>
      </tr>
      <tr>
          <td style="text-align: right">2023</td>
          <td style="text-align: right">90.95</td>
          <td style="text-align: right">8.64</td>
          <td style="text-align: right">93.72</td>
          <td style="text-align: right">9.98</td>
          <td style="text-align: right">88.01</td>
          <td style="text-align: right">7.37</td>
          <td style="text-align: right">90.34</td>
          <td style="text-align: right">8.38</td>
      </tr>
      <tr>
          <td style="text-align: right">2024</td>
          <td style="text-align: right">92.88</td>
          <td style="text-align: right">15.06</td>
          <td style="text-align: right">97.32</td>
          <td style="text-align: right">18.33</td>
          <td style="text-align: right">89.51</td>
          <td style="text-align: right">13.16</td>
          <td style="text-align: right">92.81</td>
          <td style="text-align: right">15.60</td>
      </tr>
      <tr>
          <td style="text-align: right">2025</td>
          <td style="text-align: right">107.42</td>
          <td style="text-align: right">16.26</td>
          <td style="text-align: right">112.79</td>
          <td style="text-align: right">19.04</td>
          <td style="text-align: right">102.60</td>
          <td style="text-align: right">12.60</td>
          <td style="text-align: right">106.49</td>
          <td style="text-align: right">15.40</td>
      </tr>
  </tbody>
</table></div>
<p>And finally, we can run the statistics individually for each month:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># Group by month and calculate mean and std for OHLC</span>
</span></span><span class="line"><span class="cl"><span class="n">vvix_stats_by_month</span> <span class="o">=</span> <span class="n">vvix</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">vvix</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">month</span><span class="p">)[[</span><span class="s2">&#34;Open&#34;</span><span class="p">,</span> <span class="s2">&#34;High&#34;</span><span class="p">,</span> <span class="s2">&#34;Low&#34;</span><span class="p">,</span> <span class="s2">&#34;Close&#34;</span><span class="p">]]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s2">&#34;mean&#34;</span><span class="p">,</span> <span class="s2">&#34;std&#34;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Flatten the column MultiIndex</span>
</span></span><span class="line"><span class="cl"><span class="n">vvix_stats_by_month</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;_&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">vvix_stats_by_month</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">vvix_stats_by_month</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;Year&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">display</span><span class="p">(</span><span class="n">vvix_stats_by_month</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Gives us:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: right">Year</th>
          <th style="text-align: right">Open_mean</th>
          <th style="text-align: right">Open_std</th>
          <th style="text-align: right">High_mean</th>
          <th style="text-align: right">High_std</th>
          <th style="text-align: right">Low_mean</th>
          <th style="text-align: right">Low_std</th>
          <th style="text-align: right">Close_mean</th>
          <th style="text-align: right">Close_std</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: right">1</td>
          <td style="text-align: right">92.46</td>
          <td style="text-align: right">15.63</td>
          <td style="text-align: right">94.37</td>
          <td style="text-align: right">17.63</td>
          <td style="text-align: right">90.69</td>
          <td style="text-align: right">14.23</td>
          <td style="text-align: right">92.23</td>
          <td style="text-align: right">15.78</td>
      </tr>
      <tr>
          <td style="text-align: right">2</td>
          <td style="text-align: right">93.49</td>
          <td style="text-align: right">18.24</td>
          <td style="text-align: right">95.39</td>
          <td style="text-align: right">20.70</td>
          <td style="text-align: right">91.39</td>
          <td style="text-align: right">16.43</td>
          <td style="text-align: right">93.13</td>
          <td style="text-align: right">18.58</td>
      </tr>
      <tr>
          <td style="text-align: right">3</td>
          <td style="text-align: right">95.30</td>
          <td style="text-align: right">21.66</td>
          <td style="text-align: right">97.38</td>
          <td style="text-align: right">23.56</td>
          <td style="text-align: right">92.94</td>
          <td style="text-align: right">19.51</td>
          <td style="text-align: right">94.89</td>
          <td style="text-align: right">21.59</td>
      </tr>
      <tr>
          <td style="text-align: right">4</td>
          <td style="text-align: right">92.18</td>
          <td style="text-align: right">19.03</td>
          <td style="text-align: right">94.01</td>
          <td style="text-align: right">20.57</td>
          <td style="text-align: right">90.30</td>
          <td style="text-align: right">17.21</td>
          <td style="text-align: right">91.88</td>
          <td style="text-align: right">18.60</td>
      </tr>
      <tr>
          <td style="text-align: right">5</td>
          <td style="text-align: right">92.14</td>
          <td style="text-align: right">17.00</td>
          <td style="text-align: right">93.84</td>
          <td style="text-align: right">18.06</td>
          <td style="text-align: right">90.45</td>
          <td style="text-align: right">16.22</td>
          <td style="text-align: right">91.70</td>
          <td style="text-align: right">16.86</td>
      </tr>
      <tr>
          <td style="text-align: right">6</td>
          <td style="text-align: right">92.92</td>
          <td style="text-align: right">15.07</td>
          <td style="text-align: right">94.44</td>
          <td style="text-align: right">16.33</td>
          <td style="text-align: right">91.32</td>
          <td style="text-align: right">14.03</td>
          <td style="text-align: right">92.75</td>
          <td style="text-align: right">15.05</td>
      </tr>
      <tr>
          <td style="text-align: right">7</td>
          <td style="text-align: right">89.97</td>
          <td style="text-align: right">13.16</td>
          <td style="text-align: right">91.46</td>
          <td style="text-align: right">14.23</td>
          <td style="text-align: right">88.48</td>
          <td style="text-align: right">12.26</td>
          <td style="text-align: right">89.84</td>
          <td style="text-align: right">13.12</td>
      </tr>
      <tr>
          <td style="text-align: right">8</td>
          <td style="text-align: right">96.83</td>
          <td style="text-align: right">16.94</td>
          <td style="text-align: right">98.89</td>
          <td style="text-align: right">18.72</td>
          <td style="text-align: right">94.68</td>
          <td style="text-align: right">14.86</td>
          <td style="text-align: right">96.61</td>
          <td style="text-align: right">16.63</td>
      </tr>
      <tr>
          <td style="text-align: right">9</td>
          <td style="text-align: right">94.71</td>
          <td style="text-align: right">14.03</td>
          <td style="text-align: right">96.50</td>
          <td style="text-align: right">15.52</td>
          <td style="text-align: right">92.86</td>
          <td style="text-align: right">12.50</td>
          <td style="text-align: right">94.40</td>
          <td style="text-align: right">13.78</td>
      </tr>
      <tr>
          <td style="text-align: right">10</td>
          <td style="text-align: right">97.74</td>
          <td style="text-align: right">14.01</td>
          <td style="text-align: right">99.43</td>
          <td style="text-align: right">15.11</td>
          <td style="text-align: right">96.14</td>
          <td style="text-align: right">13.35</td>
          <td style="text-align: right">97.52</td>
          <td style="text-align: right">14.15</td>
      </tr>
      <tr>
          <td style="text-align: right">11</td>
          <td style="text-align: right">93.53</td>
          <td style="text-align: right">14.17</td>
          <td style="text-align: right">95.07</td>
          <td style="text-align: right">15.36</td>
          <td style="text-align: right">91.98</td>
          <td style="text-align: right">13.39</td>
          <td style="text-align: right">93.28</td>
          <td style="text-align: right">14.24</td>
      </tr>
      <tr>
          <td style="text-align: right">12</td>
          <td style="text-align: right">93.35</td>
          <td style="text-align: right">15.03</td>
          <td style="text-align: right">95.33</td>
          <td style="text-align: right">16.63</td>
          <td style="text-align: right">91.78</td>
          <td style="text-align: right">13.70</td>
          <td style="text-align: right">93.46</td>
          <td style="text-align: right">15.07</td>
      </tr>
  </tbody>
</table></div>
<h3 id="deciles---vvix">Deciles - VVIX
</h3><p>Here are the levels for each decile, for the full dataset:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">vvix_deciles</span> <span class="o">=</span> <span class="n">vvix</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">display</span><span class="p">(</span><span class="n">vvix_deciles</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Gives us:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: right"></th>
          <th style="text-align: right">Close</th>
          <th style="text-align: right">High</th>
          <th style="text-align: right">Low</th>
          <th style="text-align: right">Open</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: right">0.00</td>
          <td style="text-align: right">59.74</td>
          <td style="text-align: right">59.74</td>
          <td style="text-align: right">59.31</td>
          <td style="text-align: right">59.31</td>
      </tr>
      <tr>
          <td style="text-align: right">0.10</td>
          <td style="text-align: right">75.82</td>
          <td style="text-align: right">75.99</td>
          <td style="text-align: right">75.43</td>
          <td style="text-align: right">75.79</td>
      </tr>
      <tr>
          <td style="text-align: right">0.20</td>
          <td style="text-align: right">80.55</td>
          <td style="text-align: right">81.41</td>
          <td style="text-align: right">79.81</td>
          <td style="text-align: right">80.74</td>
      </tr>
      <tr>
          <td style="text-align: right">0.30</td>
          <td style="text-align: right">83.89</td>
          <td style="text-align: right">85.18</td>
          <td style="text-align: right">82.97</td>
          <td style="text-align: right">84.15</td>
      </tr>
      <tr>
          <td style="text-align: right">0.40</td>
          <td style="text-align: right">87.06</td>
          <td style="text-align: right">88.54</td>
          <td style="text-align: right">85.97</td>
          <td style="text-align: right">87.44</td>
      </tr>
      <tr>
          <td style="text-align: right">0.50</td>
          <td style="text-align: right">90.51</td>
          <td style="text-align: right">92.24</td>
          <td style="text-align: right">89.34</td>
          <td style="text-align: right">90.82</td>
      </tr>
      <tr>
          <td style="text-align: right">0.60</td>
          <td style="text-align: right">94.21</td>
          <td style="text-align: right">96.13</td>
          <td style="text-align: right">93.02</td>
          <td style="text-align: right">94.49</td>
      </tr>
      <tr>
          <td style="text-align: right">0.70</td>
          <td style="text-align: right">99.13</td>
          <td style="text-align: right">101.53</td>
          <td style="text-align: right">97.44</td>
          <td style="text-align: right">99.43</td>
      </tr>
      <tr>
          <td style="text-align: right">0.80</td>
          <td style="text-align: right">106.06</td>
          <td style="text-align: right">109.40</td>
          <td style="text-align: right">103.93</td>
          <td style="text-align: right">106.49</td>
      </tr>
      <tr>
          <td style="text-align: right">0.90</td>
          <td style="text-align: right">115.31</td>
          <td style="text-align: right">118.82</td>
          <td style="text-align: right">112.50</td>
          <td style="text-align: right">115.56</td>
      </tr>
      <tr>
          <td style="text-align: right">1.00</td>
          <td style="text-align: right">207.59</td>
          <td style="text-align: right">212.22</td>
          <td style="text-align: right">187.27</td>
          <td style="text-align: right">212.22</td>
      </tr>
  </tbody>
</table></div>
<h2 id="plots---vvix">Plots - VVIX
</h2><h3 id="histogram-distribution---vvix">Histogram Distribution - VVIX
</h3><p>A quick histogram gives us the distribution for the entire dataset:</p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/02_Histogram.png"
	width="3570"
	height="1769"
	
	loading="lazy"
	
		alt="Histogram"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<p>Now, let&rsquo;s add the levels for the mean minus 1 standard deviation, mean, mean plus 1 standard deviation, mean plus 2 standard deviations, mean plus 3 standard deviations, and mean plus 4 standard deviations:</p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/02_Histogram&#43;Mean&#43;SD.png"
	width="3570"
	height="1769"
	
	loading="lazy"
	
		alt="Histogram, Mean, And Standard Deviations"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h3 id="historical-data---vvix">Historical Data - VVIX
</h3><p>Here&rsquo;s two plots for the dataset. The first covers 2007 - 2016, and the second 2017 - Present. This is the daily high level:</p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/02_VVIX_Plot_2007-2016.png"
	width="3570"
	height="1768"
	
	loading="lazy"
	
		alt="VVIX Daily High, 2007 - 2016"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/02_VVIX_Plot_2017-Present.png"
	width="3570"
	height="1768"
	
	loading="lazy"
	
		alt="VVIX Daily High, 2017 - Present"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h2 id="investigating-a-signal">Investigating A Signal
</h2><p>Next, we will consider the idea of a spike level in the VIX and how we might use a spike level to generate a signal. These elevated levels usually occur during market sell-off events or longer term drawdowns in the S&amp;P 500. Sometimes the VIX reverts to recent levels after a spike, but other times levels remain elevated for weeks or even months.</p>
<h3 id="determining-a-spike-level">Determining A Spike Level
</h3><p>We will start the 10 day simple moving average (SMA) of the daily high level to get an idea of what is happening recently with the VIX. We&rsquo;ll then pick an arbitrary spike level (25% above the 10 day SMA), and our signal is generated if the VIX hits a level that is above the spike threshold.</p>
<p>The idea is that the 10 day SMA will smooth out the recent short term volatility in the VIX, and therefore any gradual increases in the VIX are not interpreted as spike events.</p>
<p>We also will generate the 20 and 50 day SMAs for reference, and again to see what is happening with the level of the VIX over slightly longer timeframes.</p>
<p>Here&rsquo;s the code for the above:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># Define the spike multiplier for detecting significant spikes</span>
</span></span><span class="line"><span class="cl"><span class="n">spike_level</span> <span class="o">=</span> <span class="mf">1.25</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># =========================</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Simple Moving Averages (SMA)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># =========================</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Calculate 10-period SMA of &#39;High&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High_SMA_10&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Shift the 10-period SMA by 1 to compare with current &#39;High&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High_SMA_10_Shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High_SMA_10&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Calculate the spike level based on shifted SMA and spike multiplier</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;Spike_Level_SMA&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High_SMA_10_Shift&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">spike_level</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Calculate 20-period SMA of &#39;High&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High_SMA_20&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Determine if &#39;High&#39; exceeds the spike level (indicates a spike)</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;Spike_SMA&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;Spike_Level_SMA&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Calculate 50-period SMA of &#39;High&#39; for trend analysis</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High_SMA_50&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># =========================</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Exponential Moving Averages (EMA)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># =========================</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Calculate 10-period EMA of &#39;High&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High_EMA_10&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">span</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">adjust</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Shift the 10-period EMA by 1 to compare with current &#39;High&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High_EMA_10_Shift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High_EMA_10&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Calculate the spike level based on shifted EMA and spike multiplier</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;Spike_Level_EMA&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High_EMA_10_Shift&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">spike_level</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Calculate 20-period EMA of &#39;High&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High_EMA_20&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">span</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">adjust</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Determine if &#39;High&#39; exceeds the spike level (indicates a spike)</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;Spike_EMA&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;Spike_Level_EMA&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Calculate 50-period EMA of &#39;High&#39; for trend analysis</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High_EMA_50&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="p">[</span><span class="s1">&#39;High&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">span</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">adjust</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>For this exercise, we will use simple moving averages.</p>
<h3 id="spike-counts-signals-by-year">Spike Counts (Signals) By Year
</h3><p>To investigate the number of spike events (or signals) that we receive on a yearly basis, we can run the following:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># Ensure the index is a DatetimeIndex</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">vix</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Create a new column for the year extracted from the date index</span>
</span></span><span class="line"><span class="cl"><span class="n">vix</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vix</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Group by year and the &#34;Spike_SMA&#34; and &#34;Spike_EMA&#34; columns, then count occurrences</span>
</span></span><span class="line"><span class="cl"><span class="n">spike_count_SMA</span> <span class="o">=</span> <span class="n">vix</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="s1">&#39;Spike_SMA&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">display</span><span class="p">(</span><span class="n">spike_count_SMA</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Which gives us the following:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: right">Year</th>
          <th style="text-align: right">False</th>
          <th style="text-align: right">True</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: right">1990</td>
          <td style="text-align: right">248</td>
          <td style="text-align: right">5</td>
      </tr>
      <tr>
          <td style="text-align: right">1991</td>
          <td style="text-align: right">249</td>
          <td style="text-align: right">4</td>
      </tr>
      <tr>
          <td style="text-align: right">1992</td>
          <td style="text-align: right">250</td>
          <td style="text-align: right">4</td>
      </tr>
      <tr>
          <td style="text-align: right">1993</td>
          <td style="text-align: right">251</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: right">1994</td>
          <td style="text-align: right">243</td>
          <td style="text-align: right">9</td>
      </tr>
      <tr>
          <td style="text-align: right">1995</td>
          <td style="text-align: right">252</td>
          <td style="text-align: right">0</td>
      </tr>
      <tr>
          <td style="text-align: right">1996</td>
          <td style="text-align: right">248</td>
          <td style="text-align: right">6</td>
      </tr>
      <tr>
          <td style="text-align: right">1997</td>
          <td style="text-align: right">247</td>
          <td style="text-align: right">6</td>
      </tr>
      <tr>
          <td style="text-align: right">1998</td>
          <td style="text-align: right">243</td>
          <td style="text-align: right">9</td>
      </tr>
      <tr>
          <td style="text-align: right">1999</td>
          <td style="text-align: right">250</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: right">2000</td>
          <td style="text-align: right">248</td>
          <td style="text-align: right">4</td>
      </tr>
      <tr>
          <td style="text-align: right">2001</td>
          <td style="text-align: right">240</td>
          <td style="text-align: right">8</td>
      </tr>
      <tr>
          <td style="text-align: right">2002</td>
          <td style="text-align: right">248</td>
          <td style="text-align: right">4</td>
      </tr>
      <tr>
          <td style="text-align: right">2003</td>
          <td style="text-align: right">251</td>
          <td style="text-align: right">1</td>
      </tr>
      <tr>
          <td style="text-align: right">2004</td>
          <td style="text-align: right">250</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: right">2005</td>
          <td style="text-align: right">250</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: right">2006</td>
          <td style="text-align: right">242</td>
          <td style="text-align: right">9</td>
      </tr>
      <tr>
          <td style="text-align: right">2007</td>
          <td style="text-align: right">239</td>
          <td style="text-align: right">12</td>
      </tr>
      <tr>
          <td style="text-align: right">2008</td>
          <td style="text-align: right">238</td>
          <td style="text-align: right">15</td>
      </tr>
      <tr>
          <td style="text-align: right">2009</td>
          <td style="text-align: right">249</td>
          <td style="text-align: right">3</td>
      </tr>
      <tr>
          <td style="text-align: right">2010</td>
          <td style="text-align: right">239</td>
          <td style="text-align: right">13</td>
      </tr>
      <tr>
          <td style="text-align: right">2011</td>
          <td style="text-align: right">240</td>
          <td style="text-align: right">12</td>
      </tr>
      <tr>
          <td style="text-align: right">2012</td>
          <td style="text-align: right">248</td>
          <td style="text-align: right">2</td>
      </tr>
      <tr>
          <td style="text-align: right">2013</td>
          <td style="text-align: right">249</td>
          <td style="text-align: right">3</td>
      </tr>
      <tr>
          <td style="text-align: right">2014</td>
          <td style="text-align: right">235</td>
          <td style="text-align: right">17</td>
      </tr>
      <tr>
          <td style="text-align: right">2015</td>
          <td style="text-align: right">240</td>
          <td style="text-align: right">12</td>
      </tr>
      <tr>
          <td style="text-align: right">2016</td>
          <td style="text-align: right">234</td>
          <td style="text-align: right">18</td>
      </tr>
      <tr>
          <td style="text-align: right">2017</td>
          <td style="text-align: right">244</td>
          <td style="text-align: right">7</td>
      </tr>
      <tr>
          <td style="text-align: right">2018</td>
          <td style="text-align: right">228</td>
          <td style="text-align: right">23</td>
      </tr>
      <tr>
          <td style="text-align: right">2019</td>
          <td style="text-align: right">241</td>
          <td style="text-align: right">11</td>
      </tr>
      <tr>
          <td style="text-align: right">2020</td>
          <td style="text-align: right">224</td>
          <td style="text-align: right">29</td>
      </tr>
      <tr>
          <td style="text-align: right">2021</td>
          <td style="text-align: right">235</td>
          <td style="text-align: right">17</td>
      </tr>
      <tr>
          <td style="text-align: right">2022</td>
          <td style="text-align: right">239</td>
          <td style="text-align: right">12</td>
      </tr>
      <tr>
          <td style="text-align: right">2023</td>
          <td style="text-align: right">246</td>
          <td style="text-align: right">4</td>
      </tr>
      <tr>
          <td style="text-align: right">2024</td>
          <td style="text-align: right">237</td>
          <td style="text-align: right">15</td>
      </tr>
      <tr>
          <td style="text-align: right">2025</td>
          <td style="text-align: right">86</td>
          <td style="text-align: right">12</td>
      </tr>
  </tbody>
</table></div>
<p>And the plot to aid with visualization. Based on the plot, it seems as though volatility has increased since the early 2000&rsquo;s:</p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/08_Spike_Counts.png"
	width="3570"
	height="1768"
	
	loading="lazy"
	
		alt="Spike Counts"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h3 id="spike-counts-signals-plots-by-year">Spike Counts (Signals) Plots By Year
</h3><p>The most recent yearly plots are shown below for when signals are generated. The images for the previous years are linked below.</p>
<!-- #### 1990

![Spike/Signals, 1990](09_VIX_SMA_Spike_1990_1990.png)

#### 1991

![Spike/Signals, 1991](09_VIX_SMA_Spike_1991_1991.png)

#### 1992

![Spike/Signals, 1992](09_VIX_SMA_Spike_1992_1992.png)

#### 1993

![Spike/Signals, 1993](09_VIX_SMA_Spike_1993_1993.png)

#### 1994

![Spike/Signals, 1994](09_VIX_SMA_Spike_1994_1994.png)

#### 1995

![Spike/Signals, 1995](09_VIX_SMA_Spike_1995_1995.png)

#### 1996

![Spike/Signals, 1996](09_VIX_SMA_Spike_1996_1996.png)

#### 1997

![Spike/Signals, 1997](09_VIX_SMA_Spike_1997_1997.png)

#### 1998

![Spike/Signals, 1998](09_VIX_SMA_Spike_1998_1998.png)

#### 1999

![Spike/Signals, 1999](09_VIX_SMA_Spike_1999_1999.png)

#### 2000

![Spike/Signals, 2000](09_VIX_SMA_Spike_2000_2000.png)

#### 2001

![Spike/Signals, 2001](09_VIX_SMA_Spike_2001_2001.png)

#### 2002

![Spike/Signals, 2002](09_VIX_SMA_Spike_2002_2002.png)

#### 2003

![Spike/Signals, 2003](09_VIX_SMA_Spike_2003_2003.png)

#### 2004

![Spike/Signals, 2004](09_VIX_SMA_Spike_2004_2004.png)

#### 2005

![Spike/Signals, 2005](09_VIX_SMA_Spike_2005_2005.png)

#### 2006

![Spike/Signals, 2006](09_VIX_SMA_Spike_2006_2006.png)

#### 2007

![Spike/Signals, 2007](09_VIX_SMA_Spike_2007_2007.png)

#### 2008

![Spike/Signals, 2008](09_VIX_SMA_Spike_2008_2008.png)

#### 2009

![Spike/Signals, 2009](09_VIX_SMA_Spike_2009_2009.png)

#### 2010

![Spike/Signals, 2010](09_VIX_SMA_Spike_2010_2010.png)

#### 2011

![Spike/Signals, 2011](09_VIX_SMA_Spike_2011_2011.png)

#### 2012

![Spike/Signals, 2012](09_VIX_SMA_Spike_2012_2012.png)

#### 2013

![Spike/Signals, 2013](09_VIX_SMA_Spike_2013_2013.png)

#### 2014

![Spike/Signals, 2014](09_VIX_SMA_Spike_2014_2014.png)

#### 2015

![Spike/Signals, 2015](09_VIX_SMA_Spike_2015_2015.png)

#### 2016

![Spike/Signals, 2016](09_VIX_SMA_Spike_2016_2016.png)

#### 2017

![Spike/Signals, 2017](09_VIX_SMA_Spike_2017_2017.png)

#### 2018

![Spike/Signals, 2018](09_VIX_SMA_Spike_2018_2018.png)

#### 2019

![Spike/Signals, 2019](09_VIX_SMA_Spike_2019_2019.png) -->
<p><a class="link" href="09_VIX_SMA_Spike_1990_1990.png" >Spike/Signals, 1990</a></br>
<a class="link" href="09_VIX_SMA_Spike_1991_1991.png" >Spike/Signals, 1991</a></br>
<a class="link" href="09_VIX_SMA_Spike_1992_1992.png" >Spike/Signals, 1992</a></br>
<a class="link" href="09_VIX_SMA_Spike_1993_1993.png" >Spike/Signals, 1993</a></br>
<a class="link" href="09_VIX_SMA_Spike_1994_1994.png" >Spike/Signals, 1994</a></br>
<a class="link" href="09_VIX_SMA_Spike_1995_1995.png" >Spike/Signals, 1995</a></br>
<a class="link" href="09_VIX_SMA_Spike_1996_1996.png" >Spike/Signals, 1996</a></br>
<a class="link" href="09_VIX_SMA_Spike_1997_1997.png" >Spike/Signals, 1997</a></br>
<a class="link" href="09_VIX_SMA_Spike_1998_1998.png" >Spike/Signals, 1998</a></br>
<a class="link" href="09_VIX_SMA_Spike_1999_1999.png" >Spike/Signals, 1999</a></br>
<a class="link" href="09_VIX_SMA_Spike_2000_2000.png" >Spike/Signals, 2000</a></br>
<a class="link" href="09_VIX_SMA_Spike_2001_2001.png" >Spike/Signals, 2001</a></br>
<a class="link" href="09_VIX_SMA_Spike_2002_2002.png" >Spike/Signals, 2002</a></br>
<a class="link" href="09_VIX_SMA_Spike_2003_2003.png" >Spike/Signals, 2003</a></br>
<a class="link" href="09_VIX_SMA_Spike_2004_2004.png" >Spike/Signals, 2004</a></br>
<a class="link" href="09_VIX_SMA_Spike_2005_2005.png" >Spike/Signals, 2005</a></br>
<a class="link" href="09_VIX_SMA_Spike_2006_2006.png" >Spike/Signals, 2006</a></br>
<a class="link" href="09_VIX_SMA_Spike_2007_2007.png" >Spike/Signals, 2007</a></br>
<a class="link" href="09_VIX_SMA_Spike_2008_2008.png" >Spike/Signals, 2008</a></br>
<a class="link" href="09_VIX_SMA_Spike_2009_2009.png" >Spike/Signals, 2009</a></br>
<a class="link" href="09_VIX_SMA_Spike_2010_2010.png" >Spike/Signals, 2010</a></br>
<a class="link" href="09_VIX_SMA_Spike_2011_2011.png" >Spike/Signals, 2011</a></br>
<a class="link" href="09_VIX_SMA_Spike_2012_2012.png" >Spike/Signals, 2012</a></br>
<a class="link" href="09_VIX_SMA_Spike_2013_2013.png" >Spike/Signals, 2013</a></br>
<a class="link" href="09_VIX_SMA_Spike_2014_2014.png" >Spike/Signals, 2014</a></br>
<a class="link" href="09_VIX_SMA_Spike_2015_2015.png" >Spike/Signals, 2015</a></br>
<a class="link" href="09_VIX_SMA_Spike_2016_2016.png" >Spike/Signals, 2016</a></br>
<a class="link" href="09_VIX_SMA_Spike_2017_2017.png" >Spike/Signals, 2017</a></br>
<a class="link" href="09_VIX_SMA_Spike_2018_2018.png" >Spike/Signals, 2018</a></br>
<a class="link" href="09_VIX_SMA_Spike_2019_2019.png" >Spike/Signals, 2019</a></p>
<h4 id="2020">2020
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_2020_2020.png"
	width="3570"
	height="1768"
	
	loading="lazy"
	
		alt="Spike/Signals, 2020"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h4 id="2021">2021
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_2021_2021.png"
	width="3570"
	height="1768"
	
	loading="lazy"
	
		alt="Spike/Signals, 2021"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h4 id="2022">2022
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_2022_2022.png"
	width="3570"
	height="1768"
	
	loading="lazy"
	
		alt="Spike/Signals, 2022"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h4 id="2023">2023
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_2023_2023.png"
	width="3570"
	height="1768"
	
	loading="lazy"
	
		alt="Spike/Signals, 2023"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h4 id="2024">2024
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_2024_2024.png"
	width="3570"
	height="1767"
	
	loading="lazy"
	
		alt="Spike/Signals, 2024"
	
	
		class="gallery-image" 
		data-flex-grow="202"
		data-flex-basis="484px"
	
></p>
<h4 id="2025">2025
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_2025_2025.png"
	width="3570"
	height="1768"
	
	loading="lazy"
	
		alt="Spike/Signals, 2025"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<p>For comparison with the VVIX plot for 2025:</p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/02_VVIX_Plot_2025-Present.png"
	width="3570"
	height="1768"
	
	loading="lazy"
	
		alt="VVIX, 2025"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h3 id="spike-counts-signals-plots-by-decade">Spike Counts (Signals) Plots By Decade
</h3><p>And here are the plots for the signals generated over the past 3 decades:</p>
<h4 id="1990---1994">1990 - 1994
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_1990_1994.png"
	width="3562"
	height="1767"
	
	loading="lazy"
	
		alt="Spike/Signals, 1990 - 1994"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="483px"
	
></p>
<h4 id="1995---1999">1995 - 1999
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_1995_1999.png"
	width="3562"
	height="1767"
	
	loading="lazy"
	
		alt="Spike/Signals, 1995 - 1999"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="483px"
	
></p>
<h4 id="2000---2004">2000 - 2004
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_2000_2004.png"
	width="3571"
	height="1768"
	
	loading="lazy"
	
		alt="Spike/Signals, 2000 - 2004"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h4 id="2005---2009">2005 - 2009
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_2005_2009.png"
	width="3571"
	height="1768"
	
	loading="lazy"
	
		alt="Spike/Signals, 2005 - 2009"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h4 id="2010---2014">2010 - 2014
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_2010_2014.png"
	width="3571"
	height="1768"
	
	loading="lazy"
	
		alt="Spike/Signals, 2010 - 2014"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h4 id="2015---2019">2015 - 2019
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_2015_2019.png"
	width="3562"
	height="1768"
	
	loading="lazy"
	
		alt="Spike/Signals, 2015 - 2019"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="483px"
	
></p>
<h4 id="2020---2024">2020 - 2024
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_2020_2024.png"
	width="3571"
	height="1768"
	
	loading="lazy"
	
		alt="Spike/Signals, 2020 - 2024"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h4 id="2025---present">2025 - Present
</h4><p><img src="/2025/03/01/investigating-a-vix-trading-signal/09_VIX_SMA_Spike_2025_2029.png"
	width="3570"
	height="1768"
	
	loading="lazy"
	
		alt="Spike/Signals, 2025 - Present"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<p>For comparison with the VVIX plot for 2025:</p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/02_VVIX_Plot_2025-Present.png"
	width="3570"
	height="1768"
	
	loading="lazy"
	
		alt="VVIX, 2025"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<h2 id="trading-history">Trading History
</h2><p>I&rsquo;ve begun trading based on the above ideas, opening positions during the VIX spikes and closing them as volatility comes back down. The executed trades, closed positions, and open positions listed below are all automated updates from the transaction history exports from Schwab. The exported CSV files are available in the GitHub repository.</p>
<h3 id="trades-executed">Trades Executed
</h3><p>Here are the trades executed to date, with any comments related to execution, market sentiment, reason for opening/closing position, VIX level, etc.</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">Trade_Date</th>
          <th style="text-align: left">Action</th>
          <th style="text-align: left">Symbol</th>
          <th style="text-align: right">Quantity</th>
          <th style="text-align: right">Price</th>
          <th style="text-align: right">Fees &amp; Comm</th>
          <th style="text-align: right">Amount</th>
          <th style="text-align: right">Approx_VIX_Level</th>
          <th style="text-align: left">Comments</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">2024-08-05 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 09/18/2024 34.00 P</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">10.95</td>
          <td style="text-align: right">1.08</td>
          <td style="text-align: right">1096.08</td>
          <td style="text-align: right">34.33</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2024-08-21 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 09/18/2024 34.00 P</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">17.95</td>
          <td style="text-align: right">1.08</td>
          <td style="text-align: right">1793.92</td>
          <td style="text-align: right">16.50</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2024-08-05 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 10/16/2024 40.00 P</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">16.35</td>
          <td style="text-align: right">1.08</td>
          <td style="text-align: right">1636.08</td>
          <td style="text-align: right">42.71</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2024-09-18 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 10/16/2024 40.00 P</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">21.54</td>
          <td style="text-align: right">1.08</td>
          <td style="text-align: right">2152.92</td>
          <td style="text-align: right">18.85</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2024-08-07 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 11/20/2024 25.00 P</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">5.90</td>
          <td style="text-align: right">2.16</td>
          <td style="text-align: right">1182.16</td>
          <td style="text-align: right">27.11</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2024-11-04 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 11/20/2024 25.00 P</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">6.10</td>
          <td style="text-align: right">2.16</td>
          <td style="text-align: right">1217.84</td>
          <td style="text-align: right">22.43</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2024-08-06 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 12/18/2024 30.00 P</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">10.25</td>
          <td style="text-align: right">1.08</td>
          <td style="text-align: right">1026.08</td>
          <td style="text-align: right">32.27</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2024-11-27 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 12/18/2024 30.00 P</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">14.95</td>
          <td style="text-align: right">1.08</td>
          <td style="text-align: right">1493.92</td>
          <td style="text-align: right">14.04</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-03-04 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 04/16/2025 25.00 P</td>
          <td style="text-align: right">5</td>
          <td style="text-align: right">5.65</td>
          <td style="text-align: right">5.40</td>
          <td style="text-align: right">2830.40</td>
          <td style="text-align: right">25.75</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-03-24 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 04/16/2025 25.00 P</td>
          <td style="text-align: right">5</td>
          <td style="text-align: right">7.00</td>
          <td style="text-align: right">5.40</td>
          <td style="text-align: right">3494.60</td>
          <td style="text-align: right">18.01</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-03-10 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 05/21/2025 26.00 P</td>
          <td style="text-align: right">5</td>
          <td style="text-align: right">7.10</td>
          <td style="text-align: right">5.40</td>
          <td style="text-align: right">3555.40</td>
          <td style="text-align: right">27.54</td>
          <td style="text-align: left">Missed opportunity to close position for 20% profit before vol spike in early April 2025</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-04 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 05/21/2025 26.00 P</td>
          <td style="text-align: right">10</td>
          <td style="text-align: right">4.10</td>
          <td style="text-align: right">10.81</td>
          <td style="text-align: right">4110.81</td>
          <td style="text-align: right">38.88</td>
          <td style="text-align: left">Averaged down on existing position</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-24 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 05/21/2025 26.00 P</td>
          <td style="text-align: right">7</td>
          <td style="text-align: right">3.50</td>
          <td style="text-align: right">7.57</td>
          <td style="text-align: right">2442.43</td>
          <td style="text-align: right">27.37</td>
          <td style="text-align: left">Sold half of position due to vol spike concerns and theta</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-02 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 05/21/2025 26.00 P</td>
          <td style="text-align: right">4</td>
          <td style="text-align: right">4.35</td>
          <td style="text-align: right">4.32</td>
          <td style="text-align: right">1735.68</td>
          <td style="text-align: right">22.73</td>
          <td style="text-align: left">Sold half of remaining position due to vol spike concerns and theta</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-07 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 05/21/2025 26.00 P</td>
          <td style="text-align: right">4</td>
          <td style="text-align: right">3.55</td>
          <td style="text-align: right">4.32</td>
          <td style="text-align: right">1415.68</td>
          <td style="text-align: right">24.49</td>
          <td style="text-align: left">Closed position ahead of Fed’s (Powell’s) comments</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-04 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 05/21/2025 37.00 P</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">13.20</td>
          <td style="text-align: right">3.24</td>
          <td style="text-align: right">3963.24</td>
          <td style="text-align: right">36.46</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-07 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 05/21/2025 37.00 P</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">13.75</td>
          <td style="text-align: right">3.24</td>
          <td style="text-align: right">4121.76</td>
          <td style="text-align: right">24.51</td>
          <td style="text-align: left">Closed position ahead of Fed’s (Powell’s) comments</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-08 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 05/21/2025 50.00 P</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">21.15</td>
          <td style="text-align: right">2.16</td>
          <td style="text-align: right">4232.16</td>
          <td style="text-align: right">nan</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-24 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 05/21/2025 50.00 P</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">25.30</td>
          <td style="text-align: right">1.08</td>
          <td style="text-align: right">2528.92</td>
          <td style="text-align: right">nan</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-25 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 05/21/2025 50.00 P</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">25.65</td>
          <td style="text-align: right">1.08</td>
          <td style="text-align: right">2563.92</td>
          <td style="text-align: right">nan</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-03 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 06/18/2025 27.00 P</td>
          <td style="text-align: right">8</td>
          <td style="text-align: right">7.05</td>
          <td style="text-align: right">8.65</td>
          <td style="text-align: right">5648.65</td>
          <td style="text-align: right">27.62</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-08 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 06/18/2025 27.00 P</td>
          <td style="text-align: right">4</td>
          <td style="text-align: right">4.55</td>
          <td style="text-align: right">4.32</td>
          <td style="text-align: right">1824.32</td>
          <td style="text-align: right">55.44</td>
          <td style="text-align: left">Averaged down on existing position</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-12 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 06/18/2025 27.00 P</td>
          <td style="text-align: right">6</td>
          <td style="text-align: right">7.55</td>
          <td style="text-align: right">6.49</td>
          <td style="text-align: right">4523.51</td>
          <td style="text-align: right">19.05</td>
          <td style="text-align: left">Market up on positive news of lowering tariffs with China; VIX down 15%, VVIX down 10%</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-12 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 06/18/2025 27.00 P</td>
          <td style="text-align: right">6</td>
          <td style="text-align: right">7.40</td>
          <td style="text-align: right">6.49</td>
          <td style="text-align: right">4433.51</td>
          <td style="text-align: right">19.47</td>
          <td style="text-align: left">Market up on positive news of lowering tariffs with China; VIX down 15%, VVIX down 10%</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-04 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 06/18/2025 36.00 P</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">13.40</td>
          <td style="text-align: right">3.24</td>
          <td style="text-align: right">4023.24</td>
          <td style="text-align: right">36.61</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-12 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 06/18/2025 36.00 P</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">16.00</td>
          <td style="text-align: right">3.24</td>
          <td style="text-align: right">4796.76</td>
          <td style="text-align: right">19.14</td>
          <td style="text-align: left">Market up on positive news of lowering tariffs with China; VIX down 15%, VVIX down 10%</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-07 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 06/18/2025 45.00 P</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">18.85</td>
          <td style="text-align: right">2.16</td>
          <td style="text-align: right">3772.16</td>
          <td style="text-align: right">53.65</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-12 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 06/18/2025 45.00 P</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">25.00</td>
          <td style="text-align: right">2.16</td>
          <td style="text-align: right">4997.84</td>
          <td style="text-align: right">19.24</td>
          <td style="text-align: left">Market up on positive news of lowering tariffs with China; VIX down 15%, VVIX down 10%</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-03 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 07/16/2025 29.00 P</td>
          <td style="text-align: right">5</td>
          <td style="text-align: right">8.55</td>
          <td style="text-align: right">5.40</td>
          <td style="text-align: right">4280.40</td>
          <td style="text-align: right">29.03</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-13 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 07/16/2025 29.00 P</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">10.40</td>
          <td style="text-align: right">3.24</td>
          <td style="text-align: right">3116.76</td>
          <td style="text-align: right">17.72</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-13 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 07/16/2025 29.00 P</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">10.30</td>
          <td style="text-align: right">2.16</td>
          <td style="text-align: right">2057.84</td>
          <td style="text-align: right">17.68</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-04 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 07/16/2025 36.00 P</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">13.80</td>
          <td style="text-align: right">3.24</td>
          <td style="text-align: right">4143.24</td>
          <td style="text-align: right">36.95</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-13 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 07/16/2025 36.00 P</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">17.00</td>
          <td style="text-align: right">1.08</td>
          <td style="text-align: right">1698.92</td>
          <td style="text-align: right">17.79</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-13 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 07/16/2025 36.00 P</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">16.90</td>
          <td style="text-align: right">2.16</td>
          <td style="text-align: right">3377.84</td>
          <td style="text-align: right">17.72</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-07 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 07/16/2025 45.00 P</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">21.55</td>
          <td style="text-align: right">2.16</td>
          <td style="text-align: right">4312.16</td>
          <td style="text-align: right">46.17</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-13 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 07/16/2025 45.00 P</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">25.65</td>
          <td style="text-align: right">2.16</td>
          <td style="text-align: right">5127.84</td>
          <td style="text-align: right">17.96</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-04-07 00:00:00</td>
          <td style="text-align: left">Buy to Open</td>
          <td style="text-align: left">VIX 08/20/2025 45.00 P</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">21.75</td>
          <td style="text-align: right">2.16</td>
          <td style="text-align: right">4352.16</td>
          <td style="text-align: right">49.07</td>
          <td style="text-align: left">nan</td>
      </tr>
      <tr>
          <td style="text-align: left">2025-05-13 00:00:00</td>
          <td style="text-align: left">Sell to Close</td>
          <td style="text-align: left">VIX 08/20/2025 45.00 P</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">25.40</td>
          <td style="text-align: right">2.16</td>
          <td style="text-align: right">5077.84</td>
          <td style="text-align: right">18.06</td>
          <td style="text-align: left">nan</td>
      </tr>
  </tbody>
</table></div>
<h4 id="volatility-in-august-2024">Volatility In August 2024
</h4><p>Plot with VIX level, trade side, VIX option, and VIX level at trade date/time:</p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/11_VIX_Spike_Trades_2024-07-26_2024-12-07.png"
	width="3604"
	height="1768"
	
	loading="lazy"
	
		alt="VIX Level, Trades"
	
	
		class="gallery-image" 
		data-flex-grow="203"
		data-flex-basis="489px"
	
></p>
<p>Closed positions:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">Symbol</th>
          <th style="text-align: right">Amount_Buy</th>
          <th style="text-align: right">Quantity_Buy</th>
          <th style="text-align: right">Amount_Sell</th>
          <th style="text-align: right">Quantity_Sell</th>
          <th style="text-align: right">Realized_PnL</th>
          <th style="text-align: right">Percent_PnL</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">VIX 09/18/2024 34.00 P</td>
          <td style="text-align: right">1096.08</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1793.92</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">697.84</td>
          <td style="text-align: right">0.64</td>
      </tr>
      <tr>
          <td style="text-align: left">VIX 10/16/2024 40.00 P</td>
          <td style="text-align: right">1636.08</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">2152.92</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">516.84</td>
          <td style="text-align: right">0.32</td>
      </tr>
      <tr>
          <td style="text-align: left">VIX 11/20/2024 25.00 P</td>
          <td style="text-align: right">1182.16</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">1217.84</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">35.68</td>
          <td style="text-align: right">0.03</td>
      </tr>
      <tr>
          <td style="text-align: left">VIX 12/18/2024 30.00 P</td>
          <td style="text-align: right">1026.08</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">1493.92</td>
          <td style="text-align: right">1</td>
          <td style="text-align: right">467.84</td>
          <td style="text-align: right">0.46</td>
      </tr>
  </tbody>
</table></div>
<p>Open positions:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>Symbol</th>
          <th>Amount_Buy</th>
          <th>Quantity_Buy</th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table></div>
<p>Percent profit/loss: 34.78%</p>
<p>Net profit/loss: $1,718.20</p>
<h4 id="volatility-in-march-2025">Volatility In March 2025
</h4><p>Plot with VIX level, trade side, VIX option, and VIX level at trade date/time:</p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/12_VIX_Spike_Trades_2025-02-22_2025-04-03.png"
	width="3535"
	height="1768"
	
	loading="lazy"
	
		alt="VIX Level, Trades"
	
	
		class="gallery-image" 
		data-flex-grow="199"
		data-flex-basis="479px"
	
></p>
<p>Closed positions:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">Symbol</th>
          <th style="text-align: right">Amount_Buy</th>
          <th style="text-align: right">Quantity_Buy</th>
          <th style="text-align: right">Amount_Sell</th>
          <th style="text-align: right">Quantity_Sell</th>
          <th style="text-align: right">Realized_PnL</th>
          <th style="text-align: right">Percent_PnL</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">VIX 04/16/2025 25.00 P</td>
          <td style="text-align: right">2830.40</td>
          <td style="text-align: right">5</td>
          <td style="text-align: right">3494.60</td>
          <td style="text-align: right">5</td>
          <td style="text-align: right">664.20</td>
          <td style="text-align: right">0.23</td>
      </tr>
  </tbody>
</table></div>
<p>Open positions:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>Symbol</th>
          <th>Amount_Buy</th>
          <th>Quantity_Buy</th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table></div>
<p>Percent profit/loss: 23.47%</p>
<p>Net profit/loss: $664.20</p>
<h4 id="volatility-in-april-2025">Volatility In April 2025
</h4><p>Plot with VIX level, trade side, VIX option, and VIX level at trade date/time:</p>
<p><img src="/2025/03/01/investigating-a-vix-trading-signal/13_VIX_Spike_Trades_2025-02-28_2025-05-23.png"
	width="3597"
	height="1768"
	
	loading="lazy"
	
		alt="VIX Level, Trades"
	
	
		class="gallery-image" 
		data-flex-grow="203"
		data-flex-basis="488px"
	
></p>
<p>Closed positions:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th style="text-align: left">Symbol</th>
          <th style="text-align: right">Amount_Buy</th>
          <th style="text-align: right">Quantity_Buy</th>
          <th style="text-align: right">Amount_Sell</th>
          <th style="text-align: right">Quantity_Sell</th>
          <th style="text-align: right">Realized_PnL</th>
          <th style="text-align: right">Percent_PnL</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">VIX 05/21/2025 26.00 P</td>
          <td style="text-align: right">7666.21</td>
          <td style="text-align: right">15</td>
          <td style="text-align: right">5593.79</td>
          <td style="text-align: right">15</td>
          <td style="text-align: right">-2072.42</td>
          <td style="text-align: right">-0.27</td>
      </tr>
      <tr>
          <td style="text-align: left">VIX 05/21/2025 37.00 P</td>
          <td style="text-align: right">3963.24</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">4121.76</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">158.52</td>
          <td style="text-align: right">0.04</td>
      </tr>
      <tr>
          <td style="text-align: left">VIX 05/21/2025 50.00 P</td>
          <td style="text-align: right">4232.16</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">5092.84</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">860.68</td>
          <td style="text-align: right">0.20</td>
      </tr>
      <tr>
          <td style="text-align: left">VIX 06/18/2025 27.00 P</td>
          <td style="text-align: right">7472.97</td>
          <td style="text-align: right">12</td>
          <td style="text-align: right">8957.02</td>
          <td style="text-align: right">12</td>
          <td style="text-align: right">1484.05</td>
          <td style="text-align: right">0.20</td>
      </tr>
      <tr>
          <td style="text-align: left">VIX 06/18/2025 36.00 P</td>
          <td style="text-align: right">4023.24</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">4796.76</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">773.52</td>
          <td style="text-align: right">0.19</td>
      </tr>
      <tr>
          <td style="text-align: left">VIX 06/18/2025 45.00 P</td>
          <td style="text-align: right">3772.16</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">4997.84</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">1225.68</td>
          <td style="text-align: right">0.32</td>
      </tr>
      <tr>
          <td style="text-align: left">VIX 07/16/2025 29.00 P</td>
          <td style="text-align: right">4280.40</td>
          <td style="text-align: right">5</td>
          <td style="text-align: right">5174.60</td>
          <td style="text-align: right">5</td>
          <td style="text-align: right">894.20</td>
          <td style="text-align: right">0.21</td>
      </tr>
      <tr>
          <td style="text-align: left">VIX 07/16/2025 36.00 P</td>
          <td style="text-align: right">4143.24</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">5076.76</td>
          <td style="text-align: right">3</td>
          <td style="text-align: right">933.52</td>
          <td style="text-align: right">0.23</td>
      </tr>
      <tr>
          <td style="text-align: left">VIX 07/16/2025 45.00 P</td>
          <td style="text-align: right">4312.16</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">5127.84</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">815.68</td>
          <td style="text-align: right">0.19</td>
      </tr>
      <tr>
          <td style="text-align: left">VIX 08/20/2025 45.00 P</td>
          <td style="text-align: right">4352.16</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">5077.84</td>
          <td style="text-align: right">2</td>
          <td style="text-align: right">725.68</td>
          <td style="text-align: right">0.17</td>
      </tr>
  </tbody>
</table></div>
<p>Open positions:</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>Symbol</th>
          <th>Amount_Buy</th>
          <th>Quantity_Buy</th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table></div>
<p>Percent profit/loss: 12.03%</p>
<p>Net profit/loss: $5,799.11</p>
<h4 id="complete-trade-history">Complete Trade History
</h4><p>Percent profit/loss: 14.61%</p>
<p>Net profit/loss: $8,181.51</p>
<h2 id="references">References
</h2><p><a class="link" href="https://www.cboe.com/tradable_products/vix/"  target="_blank" rel="noopener"
    >https://www.cboe.com/tradable_products/vix/</a></br>
<a class="link" href="https://github.com/ranaroussi/yfinance"  target="_blank" rel="noopener"
    >https://github.com/ranaroussi/yfinance</a></p>
<h2 id="code">Code
</h2><p>The jupyter notebook with the functions and all other code is available <a class="link" href="investigating-a-vix-trading-signal.ipynb" >here</a>.</br>
The html export of the jupyter notebook is available <a class="link" href="investigating-a-vix-trading-signal.html" >here</a>.</br>
The pdf export of the jupyter notebook is available <a class="link" href="investigating-a-vix-trading-signal.pdf" >here</a>.</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/python/">Python</a>
        
            <a href="/tags/yahoo-finance/">Yahoo Finance</a>
        
            <a href="/tags/pandas/">Pandas</a>
        
            <a href="/tags/vix/">VIX</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            Last updated on May 26, 2025
        </span>
    </section></footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
	const mainArticleElement = document.querySelector(".main-article");
        renderMathInElement(mainArticleElement, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>

    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/2024/11/04/harry-browne-permanent-portfolio/">
        
        
            <div class="article-image">
                <img src="/2024/11/04/harry-browne-permanent-portfolio/cover.064c900ecb7e5996b2bf7b0cb30919d7.jpg" 
                        width="1920" 
                        height="800" 
                        loading="lazy"
                        alt="Featured image of post Does Harry Browne&#39;s permanent portfolio withstand the test of time?"
                        data-key="harry-browne-permanent-portfolio" 
                        data-hash="md5-BkyQDst&#43;WZayv3sMswkZ1w==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Does Harry Browne&#39;s permanent portfolio withstand the test of time?</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/2023/12/24/nasdaq-data-link-tables-api-data-retrieval/">
        
        
            <div class="article-image">
                <img src="/2023/12/24/nasdaq-data-link-tables-api-data-retrieval/cover.976000143a9e4ce879bc3e4c2b9c2311.jpg" 
                        width="1920" 
                        height="800" 
                        loading="lazy"
                        alt="Featured image of post Nasdaq Data Link Tables API Data Retrieval"
                        data-key="nasdaq-data-link-tables-api-data-retrieval" 
                        data-hash="md5-l2AAFDqeTOh5vD5MK5wjEQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Nasdaq Data Link Tables API Data Retrieval</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/2023/11/15/cleaning-bloomberg-excel-export/">
        
        
            <div class="article-image">
                <img src="/2023/11/15/cleaning-bloomberg-excel-export/cover.60bf7aebe924616e0a0bbf9ac0093b2e.jpg" 
                        width="1920" 
                        height="800" 
                        loading="lazy"
                        alt="Featured image of post Cleaning A Bloomberg Data Excel Export"
                        data-key="cleaning-bloomberg-excel-export" 
                        data-hash="md5-YL966&#43;kkYW4KC7&#43;awAk7Lg==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Cleaning A Bloomberg Data Excel Export</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/2025/02/02/reusable-extensible-python-functions-financial-data-analysis/">
        
        
            <div class="article-image">
                <img src="/2025/02/02/reusable-extensible-python-functions-financial-data-analysis/cover.7b28093202be2501a79af9112d9ae815.jpg" 
                        width="1920" 
                        height="800" 
                        loading="lazy"
                        alt="Featured image of post Reusable And Extensible Python Functions For Financial Data Analysis"
                        data-key="reusable-extensible-python-functions-financial-data-analysis" 
                        data-hash="md5-eygJMgK&#43;JQGnmvkRLZroFQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Reusable And Extensible Python Functions For Financial Data Analysis</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script
    src="https://giscus.app/client.js"
    data-repo="jaredszajkowski/jaredszajkowski.github.io"
    data-repo-id="R_kgDOKZLn5w"
    data-category="Announcements"
    data-category-id="DIC_kwDOKZLn584CaJwO"
    data-mapping="title"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="light"
    data-lang="en"
    data-loading=""
    crossorigin="anonymous"
    async
></script>
<script>
    function setGiscusTheme(theme) {
        let giscus = document.querySelector("iframe.giscus-frame");
        if (giscus) {
            giscus.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme,
                        },
                    },
                },
                "https://giscus.app"
            );
        }
    }

    (function () {
        addEventListener("message", (e) => {
            if (event.origin !== "https://giscus.app") return;
            handler();
        });
        window.addEventListener("onColorSchemeChange", handler);

        function handler() {
            if (document.documentElement.dataset.scheme === "light") {
                setGiscusTheme('light');
            } else {
                setGiscusTheme('dark');
            }
        }
    })();
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2023 - 
        
        2025 Jared Szajkowski
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
